<input class="sheet-is-monster" type="checkbox" name="attr_is_monster" value="1"><span class="sheet-is-monster-tab"></span>
<div class="sheet-pcinfo">
    <div class="sheet-flex-between">
        <div class="sheet-col-left">
            <div class="sheet-noborder">
            <h1>Adventurer Conqueror King</h1>
            <input name="attr_version" type="hidden">
                 <div class="sheet-info-row">
                     <input type="text" class="sheet-info5" name="attr_character_name">
                     <input type="text" class="sheet-info1" name="attr_age">
                     <input type="text" class="sheet-info2" name="attr_gender">
                     <input type="text" class="sheet-info4" name="attr_race">
                     <span class="sheet-info5">Name</span>
                     <span class="sheet-info1">Age</span>
                     <span class="sheet-info2">Gender</span>
                     <span class="sheet-info4">Race</span>
                 </div>
                 <div class="sheet-info-row">
                     <input type="text" class="sheet-info1" name="attr_level" value="1">
                     <input type="text" class="sheet-info6" name="attr_class">
                     <input type="text" class="sheet-info6" name="attr_title">
                     <span class="sheet-info1">Level</span>
                     <span class="sheet-info6">Class</span>
                     <span class="sheet-info6">Template or Title</span>
                 </div>
                 <div class="sheet-info-row">
                     <input type="text" class="sheet-info3" name="attr_alignment">
                     <input type="text" class="sheet-info1" name="attr_xpbonus">
                     <input type="text" class="sheet-info3" name="attr_xp">
                     <input type="text" class="sheet-info3" name="attr_nextxp">
                     <span class="sheet-info3">Alignment</span>
                     <span class="sheet-info1">+XP%</span>
                     <span class="sheet-info3">Current XP</span>
                     <span class="sheet-info3">XP for Level Up</span>
                </div>
            </div>
            <div class="sheet-tiny-spacer"></div>
            <div class="sheet-thick-border">
                <!-- ABILITY SCORES -->
                <h2>Ability Scores</h2>
                <div class="sheet-flex">
                    <div class="sheet-ability-column-value">
                        <span>Strength</span>
                        <input type="number" class="sheet-ability-value" name="attr_strength" value="10">
                    </div>
                    <div class="sheet-ability-column-modifier sheet-flex-between">
                        <input type="number" class="sheet-ability-modifier" name="attr_strengthMod" value="0" readonly>
                        <span class="sheet-subtext">Melee Attack and Damage Throws, Carry Capacity</span>
                    </div>
                </div>
                <div class="sheet-flex">
                    <div class="sheet-ability-column-value">
                        <span>Intelligence</span>
                        <input type="number" class="sheet-ability-value" name="attr_intelligence" value="10">
                    </div>
                    <div class="sheet-ability-column-modifier sheet-flex-between">
                        <input type="number" class="sheet-ability-modifier" name="attr_intelligenceMod" value="0" readonly>
                        <span class="sheet-subtext">Proficiences, Languages, Spells</span>
                    </div>
                </div>
                <div class="sheet-flex">
                    <div class="sheet-ability-column-value">
                        <span>Wisdom</span>
                        <input type="number" class="sheet-ability-value" name="attr_wisdom" value="10">
                    </div>
                    <div class="sheet-ability-column-modifier sheet-flex-between">
                        <input type="number" class="sheet-ability-modifier" name="attr_wisdomMod" value="0" readonly>
                        <div class="sheet-abilblock">
                            <span class="sheet-subtext">Saving Throws<br/>
                            <input type="radio" name="attr_wisAllSaves" value="0" checked>vs Spells<br/>
                            <input type="radio" name="attr_wisAllSaves" value="1">vs All</span>
                        </div>
                    </div>
                </div>
                <div class="sheet-flex">
                    <div class="sheet-ability-column-value">
                        <span>Dexterity</span>
                        <input type="number" class="sheet-ability-value" name="attr_dexterity" value="10">
                    </div>
                    <div class="sheet-ability-column-modifier sheet-flex-between">
                        <input type="number" class="sheet-ability-modifier" name="attr_dexterityMod" value="0" readonly>
                        <span class="sheet-subtext">Missile Attack Throws, Armor Class, Initiative</span>
                    </div>
                </div>
                <div class="sheet-flex">
                    <div class="sheet-ability-column-value">
                        <span>Constitution</span>
                        <input type="number" class="sheet-ability-value" name="attr_constitution" value="10">
                    </div>
                    <div class="sheet-ability-column-modifier sheet-flex-between">
                        <input type="number" class="sheet-ability-modifier" name="attr_constitutionMod" value="0" readonly>
                        <span class="sheet-subtext">Hit Points</span>
                    </div>
                    </div>
                <div class="sheet-flex">
                    <div class="sheet-ability-column-value">
                        <span>Charisma</span>
                        <input type="number" class="sheet-ability-value" name="attr_charisma" value="10">
                    </div>
                    <div class="sheet-ability-column-modifier sheet-flex-between">
                        <input type="number" class="sheet-ability-modifier" name="attr_charismaMod" value="0" readonly>
                        <span class="sheet-subtext">Reaction Rolls, Morale Rolls, Henchmen</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="sheet-col-right">
            <div class="sheet-noborder">
                <div class="sheet-flex-between">
                    <div class="sheet-topblock">
                        <span class="sheet-toptitle">Move</span>
                        <div class="sheet-medium-spacer"></div>
                        <input type="number" class="sheet-numbubble" name="attr_moveCombat" value="40" readonly>
                    </div>
                    <div class="sheet-topblock">
                        <span class="sheet-toptitle">AC</span>
                        <div class="sheet-medium-spacer"></div>
                        <input type="number" class="sheet-numbubble" name="attr_armorclass" value="0" readonly>
                    </div>
                    <div class="sheet-topblock">
                        <span class="sheet-toptitle">HP</span>
                        <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{mortalwounds=[[1d20+(?{Modifier|0})]]}} {{rightinthe=[[1d6]]}}" name="roll_mortalwoundsRoll" title="Mortal Wounds Roll"></button>
                        <input type="number" class="sheet-numbubble sheet-hp" name="attr_hitpoints">
                    </div>
                     <div class="sheet-topblock">
                        <span class="sheet-toptitle">Max</span>
                        <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{mortality=[[1d20+(?{Modifier|0})]]}} {{rightinthe=[[1d6]]}}" name="roll_mortalityRoll" title="Tampering with Mortality Roll"></button>
                        <input type="number" class="sheet-numbubble sheet-hp" name="attr_hitpoints_max">
                    </div>
                </div>
                <div class="sheet-flex-between">
                    <div class="sheet-topblock">
                        <span class="sheet-toptitle">Initiative</span>
                        <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{initiativeroll=[[1d6+@{initiative}+(?{Modifier|0})&{tracker}]]}}" name="roll_initiativeRoll" title="Initiative Roll"></button>
                        <input type="number" class="sheet-numbubble" name="attr_initiative" value="0" readonly>
                    </div>
                    <div class="sheet-topblock">
                        <span class="sheet-toptitle">Surprise</span>
                        <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{surpriseroll=[[1d6+@{surprise}+(?{Modifier|0})]]}}" name="roll_supriseRoll" title="Surprise Roll"></button>
                        <input type="number" class="sheet-numbubble" name="attr_surprise" value="0" readonly>
                    </div>
                    <div class="sheet-topblock">
                        <span class="sheet-toptitle">Reaction</span>
                        <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{reactionroll=[[2d6+@{reaction}+(?{Modifier|0})]]}}" name="roll_reactionRoll" title="Reaction Roll"></button>
                        <input type="number" class="sheet-numbubble" name="attr_reaction" value="0" readonly>
                    </div>
                    <div class="sheet-topblock">
                        <span class="sheet-toptitle">Morale</span>
                        <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{moraleroll=[[2d6+@{morale}+(?{Modifier|0})]]}}" name="roll_moraleRoll" title="Morale Roll"></button>
                        <input type="number" class="sheet-numbubble" name="attr_morale" value="0" readonly>
                    </div>
                </div>
            </div>
            <div class="sheet-thick-border">
                <!-- Saving Throws -->
                <h2>Saving Throws</h2>
                <div class="sheet-flex">
                  <div class="sheet-svblock">
                    <span class="sheet-svbtitle">Petrify & Paralysis</span>
                    <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Petrify & Paralysis}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{paralyzeSave}]]}}" name="roll_paralyzeSaveThrow" title="Saving Throw vs Petrify & Paralysis"></button>
                    <input type="number" class="sheet-numbubble" name="attr_paralyzeSave" value="20" readonly>
                    <span class="sheet-svnsubtext">Rendered Immobile</span>
                  </div>
                  <div class="sheet-svblock">
                    <span class="sheet-svbtitle">Poison & Death</span>
                      <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Poison & Death}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{poisonSave}]]}}" name="roll_poisonSaveThrow" title="Saving Throw vs Poison & Death"></button>
                      <input type="number" class="sheet-numbubble" name="attr_poisonSave" value="20" readonly>
                      <span class="sheet-svnsubtext">Death or Incapacitation</span>
                  </div>
                  <div class="sheet-svblock">
                      <span class="sheet-svbtitle">Blast & Breath</span>
                      <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Blast & Breath}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{breathSave}]]}}" name="roll_breathSaveThrow" title="Saving Throw vs Blast & Breath"></button>
                      <input type="number" class="sheet-numbubble" name="attr_breathSave" value="20" readonly>
                      <span class="sheet-svnsubtext">Area Effects</span>
                  </div>
                  <div class="sheet-svblock">
                      <span class="sheet-svbtitle">Staffs & Wands</span>
                      <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Staffs & Wands}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{deviceSave}]]}}" name="roll_deviceSaveThrow" title="Saving Throw vs Staffs & Wands"></button>
                      <input type="number" class="sheet-numbubble" name="attr_deviceSave" value="20" readonly>
                      <span class="sheet-svnsubtext">Effects from Items</span>
                  </div>
                  <div class="sheet-svblock">
                      <span class="sheet-svbtitle">Spells</span>
                      <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Spells}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{magicSave}]]}}" name="roll_magicSaveThrow" title="Saving Throw vs Spells"></button>
                      <input type="number" class="sheet-numbubble" name="attr_magicSave" value="20" readonly>
                      <span class="sheet-svnsubtext">Effects from Spells</span>
                  </div>
                </div>
                <!-- Combat -->
                <h2>Combat</h2>
                <div class="sheet-flex">
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Move</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveCombat" value="40" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Armor</span>
                        <input type="number" class="sheet-numbubble" name="attr_armor" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Atk Throw</span>
                        <input type="number" class="sheet-numbubble" name="attr_attackthrow" value="10" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Melee</span>
                        <input type="number" class="sheet-numbubble" name="attr_attackthrowMelee" value="(@{attackthrow}-(@{strengthMod}))" disabled="true">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Missile</span>
                        <input type="number" class="sheet-numbubble" name="attr_attackthrowMissile" value="(@{attackthrow}-(@{dexterityMod}))" disabled="true">
                    </div>
                </div>
                <!-- Misc Bonuses -->
                <h2>Misc Bonuses</h2>
                <div class="sheet-flex">
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Surprise</span>
                        <input type="number" class="sheet-numbubble" name="attr_surpriseMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Reaction</span>
                        <input type="number" class="sheet-numbubble" name="attr_reactionMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Initiative</span>
                        <input type="number" class="sheet-numbubble" name="attr_initiativeMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Morale</span>
                        <input type="number" class="sheet-numbubble" name="attr_moraleMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">AC</span>
                        <input type="number" class="sheet-numbubble" name="attr_armorMisc" value="0">
                    </div>
                </div>
                <div class="sheet-flex">
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Sv P&P</span>
                        <input type="number" class="sheet-numbubble" name="attr_paralyzeSaveMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Sv P&D</span>
                        <input type="number" class="sheet-numbubble" name="attr_poisonSaveMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Sv B&B</span>
                        <input type="number" class="sheet-numbubble" name="attr_breathSaveMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Sv S&W</span>
                        <input type="number" class="sheet-numbubble" name="attr_deviceSaveMisc" value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Sv Spell</span>
                        <input type="number" class="sheet-numbubble" name="attr_magicSaveMisc" value="0">
                    </div>
                </div>
                <!-- Movement -->
                <h2>Movement</h2>
                <div class=" sheet-flex-between">
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Explore</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveExplore" value="120" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Run/Charge</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveExplore" value="120" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Stealth</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveStealth" value="20" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Climb</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveClimb" value="10" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">March</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveWilderness" value="24" readonly>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- TAB SELECTION -->
    <span>&nbsp;&nbsp;&nbsp;</span>
    <input class="sheet-is-domainsatwar" type="checkbox" name="attr_show_domainsatwar" value="1"><span class="sheet-show-domainsatwar"></span>
    <input class="sheet-is-weapons" type="checkbox" name="attr_show_weapons" value="1" checked><span class="sheet-show-weapons"></span>
    <input class="sheet-is-actions" type="checkbox" name="attr_show_actions" value="1" checked><span class="sheet-show-actions"></span>
    <input class="sheet-is-proficiencies" type="checkbox" name="attr_show_proficiencies" value="1" checked><span class="sheet-show-proficiencies"></span>
    <input class="sheet-is-equipment" type="checkbox" name="attr_show_equipment" value="1" checked><span class="sheet-show-equipment"></span>
    <input class="sheet-is-spells" type="checkbox" name="attr_show_spells" value="1" checked><span class="sheet-show-spells"></span>
    <input class="sheet-is-hirelings" type="checkbox" name="attr_show_hirelings" value="1" checked><span class="sheet-show-hirelings"></span>
    <input class="sheet-is-effects" type="checkbox" name="attr_show_effects" value="1" checked><span class="sheet-show-effects"></span>
    <!-- DOMAINS AT WAR -->
    <div class="sheet-domainsatwar-tab">
        <div class="sheet-thick-border">
            <h2>Domains at War</h2>
            <div class="sheet-flex">
                <div class="sheet-warfare-column">
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Leadership Ability</span>
                </div>
                <div class="sheet-warfare-column">
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Zone of Control</span>
                </div>
                <div class="sheet-warfare-column">
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Strategic Ability</span>
                </div>
                <div class="sheet-warfare-column">
                    <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Morale Modifier</span>
                    <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{warfaremoraleroll=[[2d6+@{morale}+(?{Modifier|0})]]}}" name="roll_warfareMoraleRoll" title="Unit Morale Roll"></button>
                    <!--class="sheet-hide-it"--><button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{warfareshockroll=[[2d6+@{morale}+(?{Modifier|0})]]}}" name="roll_warfareShockRoll" title="Unit Shock Roll"></button>
                </div>
            </div>
            <div class="sheet-flex-between">
                <span>&nbsp;&nbsp;&nbsp;</span>
                <div class="sheet-flex-between">
                    <div>
                        <input type="number" class="sheet-warfare-value" name="attr_leadership" value="0" readonly>
                        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Score</span>
                    </div>
                    <span>&nbsp;&nbsp;&nbsp;</span>
                    <div>
                        <input type="number" class="sheet-warfare-modifier" name="attr_leadershipMisc" value="0">
                        <span>&nbsp;&nbsp;Misc</span>
                    </div>
                </div>
                <span>&nbsp;&nbsp;&nbsp;</span>
                <div class="sheet-flex-between">
                    <div>
                        <input type="number" class="sheet-warfare-value" name="attr_zoc" value="0" readonly>
                        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Score</span>
                    </div>
                    <span>&nbsp;&nbsp;&nbsp;</span>
                    <div>
                        <input type="number" class="sheet-warfare-modifier" name="attr_zocMisc" value="0">
                        <span>&nbsp;&nbsp;Misc</span>
                    </div>
                </div>
                <span>&nbsp;&nbsp;&nbsp;</span>
                <div class="sheet-flex-between">
                    <div>
                        <input type="number" class="sheet-warfare-value" name="attr_strategy" value="0" readonly>
                        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Score</span>
                    </div>
                    <span>&nbsp;&nbsp;&nbsp;</span>
                    <div>
                        <input type="number" class="sheet-warfare-modifier" name="attr_strategyMisc" value="0">
                        <span>&nbsp;&nbsp;Misc</span>
                    </div>
                </div>
                <span>&nbsp;&nbsp;&nbsp;</span>
                <div class="sheet-flex-between">
                    <div>
                        <input type="number" class="sheet-warfare-value" name="attr_morale" value="0" readonly>
                        <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Score</span>
                    </div>
                    <span>&nbsp;&nbsp;&nbsp;</span>
                    <div>
                        <input type="number" class="sheet-warfare-modifier" name="attr_moraleMisc" value="0">
                        <span>&nbsp;&nbsp;Misc</span>
                    </div>
                </div>
                <span>&nbsp;&nbsp;&nbsp;</span>
            </div>
        </div>
    </div>
    <!-- WEAPONS -->
    <div class="sheet-weapons-tab">
        <div class="sheet-thick-border">
            <h2>Weapons</h2>
            <div class="sheet-rep-title sheet-flex-between">
                <span class="sheet-weapon-name">Name</span>
                <span class="sheet-weapon-type">Type</span>
                <span class="sheet-damage">Die</span>
                <span class="sheet-attackbonus">+Hit</span>
                <span class="sheet-attackbonus">+Dmg</span>
                <span class="sheet-tiny">Short</span>
                <span class="sheet-tiny">Med(-2)</span>
                <span class="sheet-tiny">Long(-5)</span>
                <span class="sheet-tiny">Focus</span>
                <span class="sheet-attackbonus">Multiplier</span>
                <span class="sheet-button-spacer"></span>
            </div>
            <fieldset class="repeating_weapons">
                <div class="sheet-weaponcontainer">
                    <input type="text" name="attr_weaponname" class="sheet-no-border sheet-weapon-name" placeholder="Weapon Name">
                    <input class="sheet-hide-it sheet-meleecheck" type="checkbox" name="attr_weapontype" value="1" checked>
                    <input class="sheet-hide-it sheet-rangedcheck" type="checkbox" name="attr_weapontype" value="2">
                    <input class="sheet-hide-it sheet-finessecheck" type="checkbox" name="attr_weapontype" value="3">
                    <select name="attr_weapontype" class="sheet-no-border sheet-weapon-type">
                        <option value="1" selected>Melee</option>
                        <option value="2">Missile</option>
                        <option value="3">Finesse</option>
                    </select>
                    <select name="attr_weapondamage" class="sheet-no-border sheet-damage">
                        <option value="1d2" >1d2</option>
                        <option value="1d3" >1d3</option>
                        <option value="1d4">1d4</option>
                        <option value="1d6" selected>1d6</option>
                        <option value="1d8" >1d8</option>
                        <option value="1d10">1d10</option>
                    </select>
                    <input type="number" name="attr_attackbonus" class="sheet-no-border sheet-attackbonus" value="0">
                    <input type="text" name="attr_damagebonus" class="sheet-no-border sheet-attackbonus" value="0">
                    <input type="text" name="attr_shortrange" class="sheet-no-border sheet-tiny">
                    <input type="text" name="attr_mediumrange" class="sheet-no-border sheet-tiny">
                    <input type="text" name="attr_longrange" class="sheet-no-border sheet-tiny">
                    <select name="attr_weaponfocus" class="sheet-no-border sheet-tiny">
                        <option value="0" selected>No</option>
                        <option value="1">Yes</option>
                    </select>
                    <input type="text" name="attr_multiplier" class="sheet-no-border sheet-attackbonus" value="1">
                    <div class="sheet-weapontype-melee">
                        <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{weaponname}}} {{attackthrow=[[1d20+@{attackbonus}+(?{Modifier|0})-@{attackthrowMelee}]]}} {{damageroll=[[{(@{multiplier}*@{weapondamage})+@{damagebonus}+@{strengthMod}, 1d1}k1]]}} {{critdamageroll=[[{((@{multiplier}+@{weaponfocus})*@{weapondamage})+@{damagebonus}+@{strengthMod}, 1d1}k1]]}} @{weapondescr_toggle}" name="roll_attackThrowMelee" title="Melee Attack Throw"></button>
                    </div>
                    <div class="sheet-weapontype-ranged">
                        <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{weaponname}}} {{weaponranges=@{shortrange}/@{mediumrange}/@{longrange}}}{{attackthrow=[[1d20+@{attackbonus}-?{Range|0-@{shortrange},0|@{shortrange}-@{mediumrange},2|@{mediumrange}-@{longrange},5}+(?{Additional Modifier|0})-@{attackthrowMissile}]]}} {{damageroll=[[{(@{multiplier}*@{weapondamage})+@{damagebonus}, 1d1}k1]]}} {{critdamageroll=[[{((@{multiplier}+@{weaponfocus})*@{weapondamage})+@{damagebonus}, 1d1}k1]]}} @{weapondescr_toggle}" name="roll_attackThrowMissile" title="Missile Attack Throw"></button>
                    </div>
                    <div class="sheet-weapontype-finesse">
                        <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{weaponname}}} {{attackthrow=[[1d20+@{attackbonus}+(?{Modifier|0})-@{attackthrowMissile}]]}} {{damageroll=[[{(@{multiplier}*@{weapondamage})+[[@{damagebonus}+(0*@{dexterityMod})]], 1d1}k1]]}} {{critdamageroll=[[{((@{multiplier}+@{weaponfocus})*@{weapondamage})+[[@{damagebonus}+(0*@{dexterityMod})]], 1d1}k1]]}} @{weapondescr_toggle}" name="roll_attackThrowFinesse" title="Finesse Attack Throw"></button>
                    </div>
                    <input type="text" name="attr_weapondescr" class="sheet-bottom-line sheet-weapon-description" placeholder="Description">
                    <input type="hidden" name="attr_weapondescr_var" value={{attackdescription=@{weapondescr}}}>
                    <input type="checkbox" name="attr_weapondescr_toggle" class="sheet-show-weapon-description" value="@{weapondescr_var}">
                </div>
            </fieldset>
        </div>
    </div>
    <!-- ACTIONS AND PROFICIENCIES -->
    <div class="sheet-actions-tab">
        <div class="sheet-flex-between sheet-thick-border sheet-actions">
            <div class="sheet-col-left">
                <h2>GMRoll Actions</h2>
                <input type="text" name="attr_DSskillname" class="sheet-bottom-line sheet-skillname" value="Adventuring Detect Secret" readonly>
                <input type="number" name="attr_DSskillvalue" class="sheet-skillvalue" value="18">
                <button type="roll" value="[@{character_name} Detect Secret](~@{character_id}|gmDSThrow)" name="roll_DSThrow" title="Detect Secret Skill Throw"></button>
                <button class="sheet-hide-it" type="roll" value="/w gm &{template:acks_template} {{char=@{character_name}}} {{name=@{DSskillname}}} {{skillthrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{DSskillvalue}]]}}" name="roll_gmDSThrow"></button>
                <input type="text" name="attr_HNskillname" class="sheet-bottom-line sheet-skillname" value="Adventuring Hear Noise" readonly>
                <input type="number" name="attr_HNskillvalue" class="sheet-skillvalue" value="18">
                <button type="roll" value="[@{character_name} Hear Noise](~@{character_id}|gmHNThrow)" name="roll_HNThrow" title="Hear Noise Skill Throw"></button>
                <button class="sheet-hide-it" type="roll" value="/w gm &{template:acks_template} {{char=@{character_name}}} {{name=@{HNskillname}}} {{skillthrow=[[(1d20+?{Modifier|0})]]}} {{target=[[@{HNskillvalue}]]}}" name="roll_gmHNThrow"></button>
                <input type="text" name="attr_FTskillname" class="sheet-bottom-line sheet-skillname" value="Adventuring Find Traps" readonly>
                <input type="number" name="attr_FTskillvalue" class="sheet-skillvalue" value="18">
                <button type="roll" value="[@{character_name} Find Traps](~@{character_id}|gmFTThrow)" name="roll_FTThrow" title="Find Traps Skill Throw"></button>
                <button class="sheet-hide-it" type="roll" value="/w gm &{template:acks_template} {{char=@{character_name}}} {{name=@{FTskillname}}} {{skillthrow=[[(1d20+?{Modifier|0})]]}} {{target=[[@{FTskillvalue}]]}}" name="roll_gmFTThrow"></button>
                <fieldset class="repeating_gmskills">
                    <input type="text" name="attr_gmskillname" class="sheet-bottom-line sheet-skillname" placeholder="Action Name">
                    <input type="number" name="attr_gmskillvalue" class="sheet-skillvalue" value="18">
                    <input type="hidden" name="attr_gmskillRollvalue" class="sheet-hide-it" readonly>
                    <button type="roll" value="@{gmskillRollvalue}" name="roll_GMThrow" title="Secret Skill Throw"></button>
                    <button class="sheet-hide-it" type="roll" value="/w gm &{template:acks_template} {{char=@{character_name}}} {{name=@{gmskillname}}} {{skillthrow=[[(1d20+?{Modifier|0})]]}} {{target=[[@{gmskillvalue}]]}}" name="roll_gmGMThrow"></button>
                </fieldset>
            </div>
            <div class="sheet-col-right">
                <h2>Actions</h2>
                <input type="text" name="attr_ODskillname" class="sheet-bottom-line sheet-skillname" value="Adventuring Open Door" readonly>
                <input type="number" name="attr_ODskillvalue" class="sheet-skillvalue" value="18">
                <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{ODskillname}}} {{skillthrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{ODskillvalue}]]}}" name="roll_ODThrow" title="Open Doors Skill Throw"></button>
                <input type="text" name="attr_TSskillname" class="sheet-bottom-line sheet-skillname" value="Adventuring Trained Skill" readonly>
                <input type="number" name="attr_TSskillvalue" class="sheet-skillvalue" value="18" readonly>
                <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{TSskillname}}} {{skillthrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{TSskillvalue}]]}}" name="roll_TSThrow" title="Trained Skill Throw"></button>
                <input type="text" name="attr_USskillname" class="sheet-bottom-line sheet-skillname" value="Adventuring Untrained Skill" readonly>
                <input type="number" name="attr_USskillvalue" class="sheet-skillvalue" value="18" readonly>
                <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{USskillname}}} {{skillthrow=[[(1d20+?{Modifier|0})]]}} {{target=[[@{USskillvalue}]]}}" name="roll_USThrow" title="Untrained Skill Throw"></button>
                <fieldset class="repeating_skills">
                    <input type="text" name="attr_skillname" class="sheet-bottom-line sheet-skillname" placeholder="Action Name">
                    <input type="number" name="attr_skillvalue" class="sheet-skillvalue" value="18">
                    <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{skillname}}} {{skillthrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{skillvalue}]]}}" name="roll_skillThrow" title="Skill Throw"></button>
                </fieldset>
            </div>
        </div>
    </div>
    <div class="sheet-proficiencies-tab">
        <div class="sheet-flex-between sheet-thick-border sheet-proficiencies">
            <div class="sheet-col-left">
                <h2>Features</h2>
                <div class="sheet-othercontainer">
                    <input type="text" name="attr_featureLanguage" class="sheet-no-border sheet-othername" value="Languages">
                    <div class="sheet-bottom-line sheet-auto-expand">
                    	<span name="attr_featuredescrLanguage"></span>
                    	<textarea spellcheck="false" name="attr_featuredescrLanguage" placeholder="Common"></textarea>
                    </div>
                </div>
                <fieldset class="repeating_features">
                    <div class="sheet-othercontainer">
                        <input type="text" name="attr_featurename" class="sheet-no-border sheet-othername" placeholder="Ability Name">
                        <div class="sheet-bottom-line sheet-auto-expand">
                        	<span name="attr_featuredescr"></span>
                        	<textarea spellcheck="false" name="attr_featuredescr" placeholder="Description"></textarea>
                        </div>
                    </div>
                </fieldset>
            </div>
            <div class="sheet-col-right">
                <h2>Proficiencies</h2>
                <div class="sheet-othercontainer">
                    <input type="text" name="attr_proficiencyAdventuring" class="sheet-no-border sheet-othername" value="Adventuring">
                    <div class="sheet-bottom-line sheet-special-auto">
                    	<span name="attr_proficiencydescrAdventuring"></span>
                    	<textarea spellcheck="false" name="attr_proficiencydescrAdventuring" placeholder="This character is well-equipped for a life of adventure. They know how to clean and sharpen weapons, saddle and ride a horse, set up a camp, and search for a secret door. They have a rough idea of the value of common coins, trade goods, gems, and jewelry. All player characters are assumed to have Adventuring for purposes of the proficiency throws of standard adventuring tasks."></textarea>
                    </div>
                </div>
                <fieldset class="repeating_proficiencies">
                    <div class="sheet-othercontainer">
                        <input type="text" name="attr_proficiencyname" class="sheet-no-border sheet-othername" placeholder="Proficiency Name">
                        <div class="sheet-bottom-line sheet-auto-expand">
                        	<span name="attr_proficiencydescr"></span>
                        	<textarea spellcheck="false" name="attr_proficiencydescr" placeholder="Description"></textarea>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    <!-- EQUIPMENT -->
    <div class="sheet-equipment-tab">
        <div class="sheet-flex-between sheet-thick-border sheet-equipment">
            <div class="sheet-col-left">
                <h2>Encumbrance</h2>
                <div class=" sheet-flex-between">
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Base Move</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveExplore"  value="120" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Move Mod</span>
                        <input type="number" class="sheet-numbubble" name="attr_moveMisc"  value="0">
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Max Carry</span>
                        <input type="number" class="sheet-numbubble" name="attr_encumbranceMax"  value="20" readonly>
                    </div>
                    <div class="sheet-svblock">
                        <span class="sheet-statstitle">Carry Mod</span>
                        <input type="number" class="sheet-numbubble" name="attr_encumbranceMisc"  value="0">
                    </div>
                </div>
                <div class="sheet-medium-spacer"></div>
                <h2>Equipment</h2>
                <fieldset class="repeating_equipment">
                     <input type="number" name="attr_itemcount" placeholder="#" class="sheet-encumbrance sheet-bottom-line" min="0">
                     <input type="text" name="attr_itemname" placeholder="Item" class="sheet-bottom-line sheet-equipment-name">
                     <input type="number" step=any name="attr_encumbrance" placeholder="wt" class="sheet-encumbrance sheet-bottom-line" min="0">
                </fieldset>
                <div class="sheet-flex-between sheet-encumbrance-total">
                  <input type="number" name="attr_coinsCP" class="sheet-coins" value="0">
                  <span class="sheet-equipment-name">cp</span>
                  <input type="number" name="attr_coinsSP" class="sheet-coins" value="0">
                  <span class="sheet-equipment-name">sp</span>
                  <input type="number" name="attr_coinsEP" class="sheet-coins" value="0">
                  <span class="sheet-equipment-name">ep</span>
                  <input type="number" name="attr_coinsGP" class="sheet-coins" value="0">
                  <span class="sheet-equipment-name">gp</span>
                  <input type="number" name="attr_coinsPP" class="sheet-coins" value="0">
                  <span class="sheet-equipment-name">pp</span>
                </div>
                <div class="sheet-top-line sheet-flex-between sheet-encumbrance-total">
                  <span class="sheet-equipment-name">Total</span>
                  <input type="number" step=any name="attr_encumbranceTotal" class="sheet-total-encumbrance" value="0" readonly>
                </div>
            </div>
            <div class="sheet-col-right">
                <h2>Unencumbering</h2>
                <fieldset class="repeating_banked">
                    <div class="sheet-othercontainer">
                        <input type="text" name="attr_bankheader" class="sheet-no-border sheet-othername" placeholder="Title">
                        <div class="sheet-bottom-line sheet-auto-expand">
                        	<span name="attr_bankdescr"></span>
                        	<textarea spellcheck="false" name="attr_bankdescr" placeholder="Description"></textarea>
                        </div>
                    </div>
                </fieldset>
            </div>
        </div>
    </div>
    <!-- SPELLS -->
    <div class="sheet-spells-tab">
        <div class="sheet-thick-border sheet-spells">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="all" checked>
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="1">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="2">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="3">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="4">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="5">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="6">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="7" disabled="true">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="8" disabled="true">
            <input type="checkbox" name="attr_spells_filter" class="sheet-spellfilter" value="9" disabled="true">
            <h2>Spells</h2>
            <div class="sheet-spells-per-level sheet-flex-between">
              <div class="sheet-flex-between">
                  <span>1: </span>
                  <input type="number" name="attr_spells_l1" value="0">
                  <span> / </span>
                  <input type="number" name="attr_spells_l1_max" value="0">
              </div>
              <div class="sheet-flex-between">
                  <span>2: </span>
                  <input type="number" name="attr_spells_l2" value="0">
                  <span> / </span>
                  <input type="number" name="attr_spells_l2_max" value="0">
              </div>
              <div class="sheet-flex-between">
                  <span>3: </span>
                  <input type="number" name="attr_spells_l3" value="0">
                  <span> / </span>
                  <input type="number" name="attr_spells_l3_max" value="0">
              </div>
              <div class="sheet-flex-between">
                  <span>4: </span>
                  <input type="number" name="attr_spells_l4" value="0">
                  <span> / </span>
                  <input type="number" name="attr_spells_l4_max" value="0">
              </div>
              <div class="sheet-flex-between">
                  <span>5: </span>
                  <input type="number" name="attr_spells_l5" value="0">
                  <span> / </span>
                  <input type="number" name="attr_spells_l5_max" value="0">
              </div>
              <div class="sheet-flex-between">
                  <span>6: </span>
                  <input type="number" name="attr_spells_l6" value="0">
                  <span> / </span>
                  <input type="number" name="attr_spells_l6_max" value="0">
              </div>
              <div class="sheet-flex-between">
                  <span>7: </span>
                  <input type="number" name="attr_spells_l7" value="0" disabled="true">
                  <span> / </span>
                  <input type="number" name="attr_spells_l7_max" value="0" disabled="true">
              </div>
              <div class="sheet-flex-between">
                  <span>8: </span>
                  <input type="number" name="attr_spells_l8" value="0" disabled="true">
                  <span> / </span>
                  <input type="number" name="attr_spells_l8_max" value="0" disabled="true">
              </div>
              <div class="sheet-flex-between">
                  <span>9: </span>
                  <input type="number" name="attr_spells_l9" value="0" disabled="true">
                  <span> / </span>
                  <input type="number" name="attr_spells_l9_max" value="0" disabled="true">
              </div>
            </div>
            <div class="sheet-spell-filters sheet-flex-between">
                <div>Filter:</div>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="all" checked>
                    <span>all</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="1">
                    <span>1</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="2">
                    <span>2</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="3">
                    <span>3</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="4">
                    <span>4</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="5">
                    <span>5</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="6">
                    <span>6</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="7" disabled="true">
                    <span>7</span>
                </label>
                <label class="sheet-filter-button">
                    <input type="radio" name="attr_spells_filter" value="8" disabled="true">
                    <span>8</span>
                </label>
                <label class="sheet-filter-button">
                  <input type="radio" name="attr_spells_filter" value="9" disabled="true">
                  <span>9</span>
              </label>
            </div>
            <fieldset class="repeating_spells">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="1">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="2">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="3">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="4">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="5">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="6">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="7" disabled="true">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="8" disabled="true">
                <input type="checkbox" name="attr_spelllevel" class="sheet-hidden-spell-level" value="9" disabled="true">
                <div class="sheet-spellcontainer">
                    <input type="text" name="attr_spellname" class="sheet-bottom-line sheet-spell-name" placeholder="Spell or Ability Name">
                    <input type="text" name="attr_spelltype" class="sheet-spell-type" placeholder="Caster Class">
                    <input type="text" name="attr_spelllevel" class="sheet-bottom-line sheet-spell-level" placeholder="1">
                    <input type="text" name="attr_spellduration" class="sheet-bottom-line sheet-spell-duration" placeholder="Duration">
                    <input type="text" name="attr_spellrange" class="sheet-bottom-line sheet-spell-range" placeholder="Range">
                    <div>
                        <span># cast: </span>
                        <input type="number" name="attr_spellcast" class="sheet-bottom-line sheet-spell-prepared" value="0" min="0">
                    </div>
                    <button type="roll" value="&{template:acks_template} {{spell=1}} {{char=@{character_name}}} {{name=@{spellname}}} {{caster=@{spelltype}}} {{level=@{spelllevel}}} {{duration=@{spellduration}}} {{range=@{spellrange}}} {{description=@{spelldescription}}}" name="roll_spellcast" title="Cast Spell"></button>
                    <div class="sheet-othercontainer sheet-auto-expand">
                    	<span name="attr_spelldescription"></span>
                    	<textarea spellcheck="false" name="attr_spelldescription" placeholder="Description"></textarea>
                    	<!-- class="sheet-spell-description" -->
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <!-- RETAINERS -->
    <div class="sheet-hirelings-tab"> 
        <div class="sheet-thick-border">
            <h2>
                Hirelings
                <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{hireroll=[[2d6+(@{charismaMod})+(?{Modifier|0})]]}}" name="roll_hire" title="Hiring Roll"></button>
            </h2>
            <fieldset class="repeating_retainers">
                <div class="sheet-retainercontainer">
                    <div class="sheet-info-row">
                        <input type="text" name="attr_retainername" class="sheet-bottom-line sheet-retainer-large">
                        <input type="text" name="attr_retainerac" class="sheet-bottom-line sheet-retainer-small">
                        <input type="text" name="attr_retainerhp" class="sheet-bottom-line sheet-retainer-small">
                        <input type="text" name="attr_retainermove" class="sheet-bottom-line sheet-retainer-small">
                        <input type="text" name="attr_retainerattack" class="sheet-bottom-line sheet-retainer-med">
                        <input type="text" name="attr_retainerdamage" class="sheet-bottom-line sheet-retainer-med">
                        <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{retainerposition}: @{retainername}}} {{attackthrow=[[1d20+(?{Modifier|0})-@{retainerattack}]]}} {{damageroll=[[@{retainerdamage}]]}} {{critdamageroll=[[@{retainerdamage}]]}}" name="roll_retainerAttackThrow" title="Hireling Attack Throw"></button>
                        <span class="sheet-retainer-large">Name</span>
                        <span class="sheet-retainer-small">AC</span>
                        <span class="sheet-retainer-small">HP</span>
                        <span class="sheet-retainer-small">Move</span>
                        <span class="sheet-retainer-med">Atk Throw</span>
                        <span class="sheet-retainer-med">Damage</span>
                        <span class="sheet-button-spacer"></span>
                    </div>
                    <div class="sheet-info-row">
                        <input type="text" name="attr_retainerclasslvl" class="sheet-bottom-line sheet-retainer-large">
                        <input type="text" name="attr_retainerposition" class="sheet-bottom-line sheet-retainer-med">
                        <input type="text" name="attr_retainerxp" class="sheet-bottom-line sheet-retainer-med">
                        <input type="text" name="attr_retainerwage" class="sheet-bottom-line sheet-retainer-small">
                        <input type="text" name="attr_retainershare" class="sheet-bottom-line sheet-retainer-small">
                        <input type="text" name="attr_retainerloyalty" class="sheet-bottom-line sheet-retainer-small">
                        <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{retainerposition}: @{retainername}}} {{loyaltyroll=[[2d6+(@{charismaMod})+(@{moraleMisc})+(@{retainerloyalty})]]}}" name="roll_loyaltyRoll" title="Hireling Loyalty Roll"></button>
                        <span class="sheet-retainer-large">Class and Level</span>
                        <span class="sheet-retainer-med">Position</span>
                        <span class="sheet-retainer-med">XP</span>
                        <span class="sheet-retainer-small">Wage</span>
                        <span class="sheet-retainer-small">Share</span>
                        <span class="sheet-retainer-small">Loyalty</span>
                        <span class="sheet-button-spacer"></span>
                    </div>
                    <div class="sheet-auto-expand">
                    	<span name="attr_retainerdesc"></span>
                    	<textarea spellcheck="false" name="attr_retainerdescr" placeholder="Notes (Alignment, Gear, Proficiencies, Wounds, Description)"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
    <div class="sheet-effects-tab">
        <div class="sheet-thick-border sheet-equipment">
            <h2>Permanent Injuries and Notes</h2>
            <fieldset class="repeating_notes">
                <div class="sheet-othercontainer">
                    <input type="text" name="attr_notesheader" class="sheet-no-border sheet-othername" placeholder="Title">
                    <div class="sheet-bottom-line sheet-auto-expand">
                    	<span name="attr_notesdescr"></span>
                    	<textarea spellcheck="false" name="attr_notesdescr" placeholder="Description"></textarea>
                    </div>
                </div>
            </fieldset>
        </div>
    </div>
</div>
<!-- THIS IS THE STAT BLOCK TAB PART -->
<div class="sheet-monsterinfo">
    <div class="sheet-statblock-spacer"/>
    <div class="sheet-flex-between">
        <div class="sheet-col-left">
            <textarea spellcheck="false" name="attr_rawBlock" class="sheet-rawblock" placeholder="Raw Stat Block"></textarea>
                <div class="sheet-thick-border">
                <!-- ABILITIES -->
                <h2>Stat Block</h2>
                <div class="sheet-statblock-column">
                    <div class="sheet-statblock-row">
                        <span>Name</span>
                        <input type="text" name="attr_character_name" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>% In Lair</span>
                        <input type="text" name="attr_MBlair" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Dungeon Enc.</span>
                        <input type="text" name="attr_MBdungeonenc" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Wilderness Enc.</span>
                        <input type="text" name="attr_MBwildernessenc" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Alignment</span>
                        <input type="text" name="attr_MBalignment" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Movement</span>
                        <input type="text" name="attr_MBmovement" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Armor Class</span>
                        <input type="text" name="attr_MBarmorclass" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Hit Dice</span>
                        <input type="text" name="attr_MBhitdice" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Attacks</span>
                        <input type="text" name="attr_MBattack" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Damage</span>
                        <input type="text" name="attr_MBdamage" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Save</span>
                        <input type="text" name="attr_MBsave" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Morale</span>
                        <input type="text" name="attr_MBmorale" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>Treasure Type</span>
                        <input type="text" name="attr_MBtreasure" readonly>
                    </div>
                    <div class="sheet-statblock-row">
                        <span>XP</span>
                        <input type="text" name="attr_MBxp" readonly>
                    </div>
                </div>
            </div>
        </div>

        <div class="sheet-col-right">
            <div class="sheet-flex-between">
                <div class="sheet-topblock">
                    <span class="sheet-toptitle">Move</span>
                    <input type="number" class="sheet-numbubble" name="attr_moveCombat">
                </div>
                <div class="sheet-topblock">
                    <span class="sheet-toptitle">AC</span>
                    <input type="number" class="sheet-numbubble" name="attr_armorclass">
                </div>
                <div class="sheet-topblock">
                    <span class="sheet-toptitle">AT</span>
                    <input type="number" class="sheet-numbubble" name="attr_attackthrow" readonly>
                </div>
                 <div class="sheet-topblock">
                    <span class="sheet-toptitle">Hit Dice</span>
                    <input type="text" class="sheet-numbubble-hd" name="attr_hitdice" value="1d8">
                </div>
            </div>
            <div class="sheet-flex-between">
                <div class="sheet-topblock">
                    <span class="sheet-toptitle">Initiative</span>
                    <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{initiativeroll=[[1d6+(@{initiative})&{tracker}]]}}" name="roll_MinitiativeRoll" title="Monster Initiative Roll"></button>
                    <input type="number" class="sheet-numbubble" name="attr_initiative">
                </div>
                <div class="sheet-topblock">
                    <span class="sheet-toptitle">Surprise</span>
                    <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{surpriseroll=[[1d6+(@{surprise})]]}}" name="roll_MsurpriseRoll" title="Monster Surprise Roll"></button>
                    <input type="number" class="sheet-numbubble" name="attr_surprise">
                </div>
                <div class="sheet-topblock">
                    <span class="sheet-toptitle">Reaction</span>
                    <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{reactionroll=[[2d6+(@{reaction})]]}}" name="roll_MreactionRoll" title="Monster Reaction Roll"></button>
                    <input type="number" class="sheet-numbubble" name="attr_reaction">
                </div>
                <div class="sheet-topblock">
                    <span class="sheet-toptitle">Morale</span>
                    <button type="roll" value="&{template:acks_template} {{name=@{character_name}}} {{moraleroll=[[2d6+(@{morale})]]}}" name="roll_MmoraleRoll" title="Monster Morale Roll"></button>
                    <input type="number" class="sheet-numbubble" name="attr_morale">
                </div>
            </div>
            <!-- FIGHTS AND SAVES AS -->
            <div class="sheet-info-row">
                <span class="sheet-monsteras-span">Fights as</span>
                <select name="attr_fightas" class="sheet-monster-type">
                    <option value="MST" selected>Monster</option>
                    <option value="FTR">Fighter</option>
                    <option value="MAG">Mage</option>
                    <option value="CLR">Cleric</option>
                    <option value="THF">Thief</option>
                    <option value="NM">Normal Man</option>
                </select>
                <input type="number" name="attr_fightlevel" value="0">
            </div>
            <div class="sheet-info-row">
                <span class="sheet-monsteras-span">Saves as</span>
                <select name="attr_saveas" class="sheet-monster-type">
                    <option value="FTR" selected>Fighter</option>
                    <option value="MAG">Mage</option>
                    <option value="CLR">Cleric</option>
                    <option value="THF">Thief</option>
                    <option value="NM">Normal Man</option>
                </select>
                <input type="number" name="attr_savelevel" value="0">
            </div>
            <div class="sheet-flex-between">
                <div class="sheet-thick-border">
                    <!-- Saving Throws -->
                    <h2>Saving Throws</h2>
                    <div class="sheet-flex">
                        <div class="sheet-svblock">
                            <span class="sheet-svbtitle">Petrify & Paralysis</span>
                            <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Petrify & Paralysis}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{paralyzeSave}]]}}" name="roll_MparalyzeSaveThrow" title="Monster Saving Throw vs Petrify & Paralysis"></button>
                            <input type="number" class="sheet-numbubble" name="attr_paralyzeSave" readonly>
                            <span class="sheet-svnsubtext">Rendered Immobile</span>
                        </div>
                        <div class="sheet-svblock">
                            <span class="sheet-svbtitle">Poison & Death</span>
                            <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Poison & Death}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{poisonSave}]]}}" name="roll_MpoisonSaveThrow" title="Monster Saving Throw vs Poison & Death"></button>
                            <input type="number" class="sheet-numbubble" name="attr_poisonSave" readonly>
                            <span class="sheet-svnsubtext">Death or Incapacitation</span>
                        </div>
                        <div class="sheet-svblock">
                            <span class="sheet-svbtitle">Blast & Breath</span>
                            <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Blast & Breath}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{breathSave}]]}}" name="roll_MbreathSaveThrow" title="Monster Saving Throw vs Blast & Breath"></button>
                            <input type="number" class="sheet-numbubble" name="attr_breathSave" readonly>
                            <span class="sheet-svnsubtext">Area Effects</span>
                        </div>
                        <div class="sheet-svblock">
                            <span class="sheet-svbtitle">Staffs & Wands</span>
                            <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Staffs & Wands}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{deviceSave}]]}}" name="roll_MdeviceSaveThrow" title="Monster Saving Throw vs Staffs & Wands"></button>
                            <input type="number" class="sheet-numbubble" name="attr_deviceSave" readonly>
                            <span class="sheet-svnsubtext">Effects from Items</span>
                        </div>
                        <div class="sheet-svblock">
                            <span class="sheet-svbtitle">Spells</span>
                            <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=Spells}} {{savethrow=[[1d20+(?{Modifier|0})]]}} {{target=[[@{magicSave}]]}}" name="roll_MmagicSaveThrow" title="Monster Saving Throw vs Spells"></button>
                            <input type="number" class="sheet-numbubble" name="attr_magicSave" readonly>
                            <span class="sheet-svnsubtext">Effects from Spells</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="sheet-flex-between">
                <!-- COMBAT STUFF -->
                <div class="sheet-thick-border">
                    <h2>Attacks</h2>
                    <div class="sheet-rep-title sheet-flex-between">
                        <span class="sheet-mweapon-name">Name</span>
                        <span class="sheet-mdamage">Damage</span>
                        <span class="sheet-mtiny">S</span>
                        <span class="sheet-mtiny">M(-2)</span>
                        <span class="sheet-mtiny">L(-5)</span>
                        <span class="sheet-button-spacer"></span>
                    </div>
                    <fieldset class="repeating_weapons">
                        <div class="sheet-weaponcontainer">
                            <input type="text" name="attr_weaponname" class="sheet-no-border sheet-mweapon-name" placeholder="Weapon Name">
                            <input type="text" name="attr_weapondamage" class="sheet-no-border sheet-mdamage" placeholder="1d6">
                            <input type="text" name="attr_shortrange" class="sheet-no-border sheet-mtiny">
                            <input type="text" name="attr_mediumrange" class="sheet-no-border sheet-mtiny">
                            <input type="text" name="attr_longrange" class="sheet-no-border sheet-mtiny">
                            <button type="roll" value="&{template:acks_template} {{char=@{character_name}}} {{name=@{weaponname}}} {{attackthrow=[[1d20+(?{Modifier|0})-(@{attackthrow})]]}} {{damageroll=[[@{weapondamage}]]}} {{critdamageroll=[[@{weapondamage}]]}} @{weapondescr_toggle}" name="roll_Mattackthrow" title="Monster Attack Throw"></button>
                            <input type="text" name="attr_weapondescr" class="sheet-bottom-line sheet-mweapon-description" placeholder="Description">
                            <input type="hidden" name="attr_weapondescr_var" value={{attackdescription=@{weapondescr}}}>
                            <input type="checkbox" name="attr_weapondescr_toggle" class="sheet-show-mweapon-description" value="@{weapondescr_var}">
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Templates -->
<rolltemplate class="sheet-rolltemplate-acks_template">
    <table>
        {{#mortalwounds}}
            <tr><td colspan="2" class="sheet-subheader">Mortal Wounds Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">d20 Result: </span></td><td class="sheet-results">{{mortalwounds}}</td></tr>
            <tr><td><span class="sheet-tcat">d6 Result: </span></td><td class="sheet-results">{{rightinthe}}</td></tr>
        {{/mortalwounds}}
        {{#mortality}}
            <tr><td colspan="2" class="sheet-subheader">Tampering with Mortality Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">d20 Result: </span></td><td class="sheet-results">{{mortality}}</td></tr>
            <tr><td><span class="sheet-tcat">d6 Result: </span></td><td class="sheet-results">{{rightinthe}}</td></tr>
        {{/mortality}}
        {{#surpriseroll}}
            <tr><td colspan="2" class="sheet-subheader">Surprise Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{surpriseroll}}</td></tr>
            {{#rollLess() surpriseroll 3}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Suprised!</b></td></tr>
            {{/rollLess() surpriseroll 3}}
            {{#rollGreater() surpriseroll 2}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Not Surprised.</b></td></tr>
            {{/rollGreater() surpriseroll 2}}
        {{/surpriseroll}}
        {{#initiativeroll}}
            <tr><td colspan="2" class="sheet-subheader">Initiative Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{initiativeroll}}</td></tr>
        {{/initiativeroll}}
        {{#reactionroll}}
            <tr><td colspan="2" class="sheet-subheader">Reaction Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{reactionroll}}</td></tr>
            {{#rollLess() reactionroll 0}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Hostile!</b></td></tr>
            {{/rollLess() reactionroll 0}}
            {{#rollBetween() reactionroll 0 2}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Hostile!</b></td></tr>
            {{/rollBetween() reactionroll 0 2}}
            {{#rollBetween() reactionroll 3 5}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Unfriendly.</b></td></tr>
            {{/rollBetween() reactionroll 3 5}}
            {{#rollBetween() reactionroll 6 8}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:gold;"><b>Uncertain.</b></td></tr>
            {{/rollBetween() reactionroll 6 8}}
            {{#rollBetween() reactionroll 9 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Uninterested.</b></td></tr>
            {{/rollBetween() reactionroll 9 11}}
            {{#rollGreater() reactionroll 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:green;"><b>Friendly!</b></td></tr>
            {{/rollGreater() reactionroll 11}}
        {{/reactionroll}}
        {{#moraleroll}}
            <tr><td colspan="2" class="sheet-subheader">Morale Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{moraleroll}}</td></tr>
            {{#rollLess() moraleroll 0}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Retreat!</b></td></tr>
            {{/rollLess() moraleroll 0}}
            {{#rollBetween() moraleroll 0 2}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Retreat!</b></td></tr>
            {{/rollBetween() moraleroll 0 2}}
            {{#rollBetween() moraleroll 3 5}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Fighting Withdrawl.</b></td></tr>
            {{/rollBetween() moraleroll 3 5}}
            {{#rollBetween() moraleroll 6 8}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:gold;"><b>Fight On.</b></td></tr>
            {{/rollBetween() moraleroll 6 8}}
            {{#rollBetween() moraleroll 9 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Advance and Pursue.</b></td></tr>
            {{/rollBetween() moraleroll 9 11}}
            {{#rollGreater() moraleroll 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:green;"><b>Victory or Death!</b></td></tr>
            {{/rollGreater() moraleroll 11}}
        {{/moraleroll}}
        {{#warfaremoraleroll}}
            <tr><td colspan="2" class="sheet-subheader">Warfare Unit Morale Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{warfaremoraleroll}}</td></tr>
            {{#rollLess() warfaremoraleroll 0}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Rout!</b></td></tr>
            {{/rollLess() warfaremoraleroll 0}}
            {{#rollBetween() warfaremoraleroll 0 2}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Rout!</b></td></tr>
            {{/rollBetween() warfaremoraleroll 0 2}}
            {{#rollBetween() warfaremoraleroll 3 5}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Flee.</b></td></tr>
            {{/rollBetween() warfaremoraleroll 3 5}}
            {{#rollBetween() warfaremoraleroll 6 8}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:gold;"><b>Waver.</b></td></tr>
            {{/rollBetween() warfaremoraleroll 6 8}}
            {{#rollBetween() warfaremoraleroll 9 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Stand Firm.</b></td></tr>
            {{/rollBetween() warfaremoraleroll 9 11}}
            {{#rollGreater() warfaremoraleroll 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:green;"><b>Rally!</b></td></tr>
            {{/rollGreater() warfaremoraleroll 11}}
        {{/warfaremoraleroll}}
        {{#warfareshockroll}}
            <tr><td colspan="2" class="sheet-subheader">Warfare Unit Shock Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{warfareshockroll}}</td></tr>
            {{#rollLess() warfareshockroll 0}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Rout!</b></td></tr>
            {{/rollLess() warfareshockroll 0}}
            {{#rollBetween() warfareshockroll 0 2}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Rout!</b></td></tr>
            {{/rollBetween() warfareshockroll 0 2}}
            {{#rollBetween() warfareshockroll 3 5}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Flee.</b></td></tr>
            {{/rollBetween() warfareshockroll 3 5}}
            {{#rollBetween() warfareshockroll 6 8}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:gold;"><b>Recoil.</b></td></tr>
            {{/rollBetween() warfareshockroll 6 8}}
            {{#rollGreater() warfareshockroll 8}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Stand Firm.</b></td></tr>
            {{/rollGreater() warfareshockroll 8}}
        {{/warfareshockroll}}
        {{#savethrow}}
            <tr><td colspan="2" class="sheet-subheader">{{char}} Saving Throw</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{savethrow}} vs {{target}}+</td></tr>
            {{#rollLess() savethrow target}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Failure.</b></td></tr>
            {{/rollLess() savethrow target}}
            {{#rollTotal() savethrow target}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Success!</b></td></tr>
            {{/rollTotal() savethrow target}}
            {{#rollGreater() savethrow target}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Success!</b></td></tr>
            {{/rollGreater() savethrow target}}
        {{/savethrow}}
        {{#attackthrow}}
            <tr><td colspan="2" class="sheet-subheader">{{char}} Attack Throw</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            {{#weaponranges}}
                <tr><td><span class="sheet-tcat">Weapon Range: </span></td><td class="sheet-results">{{weaponranges}}</td></tr>
            {{/weaponranges}}
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{attackthrow}}</td></tr>
            {{#rollWasFumble() attackthrow}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Fumble!</b></td></tr>
            {{/rollWasFumble() attackthrow}}
            {{#^rollWasFumble() attackthrow}}
                {{#rollWasCrit() attackthrow}}
                        <tr><td class="sheet-damageoutput"><span class="sheet-tcat">Damage: </span></td><td class="sheet-results">{{critdamageroll}}</td></tr>
                        {{#attackdescription}}
                            <tr><td colspan="2" class="sheet-spelltext"><span class="sheet-tcat">Description:</span><br/>{{attackdescription}}</td></tr>
                        {{/attackdescription}}
                        <tr><td colspan="2" class="sheet-subfooter" style="color:green;"><b>Critical Hit!</b></td></tr>
                {{/rollWasCrit() attackthrow}}
                {{#^rollWasCrit() attackthrow}}
                    {{#rollLess() attackthrow 0}}
                            <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Miss.</b></td></tr>
                    {{/rollLess() attackthrow 0}}
                    {{#rollTotal() attackthrow 0}}
                            <tr><td class="sheet-damageoutput"><span class="sheet-tcat">Damage: </span></td><td class="sheet-results">{{damageroll}}</td></tr>
                            {{#attackdescription}}
                                <tr><td colspan="2" class="sheet-spelltext"><span class="sheet-tcat">Description:</span><br/>{{attackdescription}}</td></tr>
                            {{/attackdescription}}
                            <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Hit AC: {{attackthrow}}</b></td></tr>
                    {{/rollTotal() attackthrow 0}}
                    {{#rollGreater() attackthrow 0}}
                            <tr><td class="sheet-damageoutput"><span class="sheet-tcat">Damage: </span></td><td class="sheet-results">{{damageroll}}</td></tr>
                            {{#attackdescription}}
                                <tr><td colspan="2" class="sheet-spelltext"><span class="sheet-tcat">Description:</span><br/>{{attackdescription}}</td></tr>
                            {{/attackdescription}}
                            <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Hit AC: {{attackthrow}}</b></td></tr>
                    {{/rollGreater() attackthrow 0}}
                {{/^rollWasCrit() attackthrow}}
            {{/^rollWasFumble() attackthrow}}
        {{/attackthrow}}
        {{#skillthrow}}
            <tr><td colspan="2" class="sheet-subheader">{{char}} Skill Throw</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{skillthrow}} vs {{target}}+ </td></tr>
            {{#rollLess() skillthrow target}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Failure.</b></td></tr>
            {{/rollLess() skillthrow target}}
            {{#rollTotal() skillthrow target}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Success!</b></td></tr>
            {{/rollTotal() skillthrow target}}
            {{#rollGreater() skillthrow target}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Success!</b></td></tr>
            {{/rollGreater() skillthrow target}}
        {{/skillthrow}}
        {{#spell}}
            <tr><td colspan="2" class="sheet-subheader">{{char}} Level {{level}} {{caster}} Spell</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr class="sheet-spellrow"><td><span class="sheet-tcat">Duration: </span></td><td class="sheet-results">{{duration}}</td></tr>
            <tr class="sheet-spellrow"><td><span class="sheet-tcat">Range: </span></td><td class="sheet-results">{{range}}</td></tr>
            <tr class="sheet-spellrow"><td colspan="2" class="sheet-spelltext"><span class="sheet-tcat">Description:</span><br/>{{description}}</td></tr>
        {{/spell}}
        {{#hireroll}}
            <tr><td colspan="2" class="sheet-subheader">Hiring Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{hireroll}}</td></tr>
            {{#rollLess() hireroll 0}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Refuse and Slander!</b></td></tr>
            {{/rollLess() hireroll 0}}
            {{#rollBetween() hireroll 0 2}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Refuse and Slander!</b></td></tr>
            {{/rollBetween() hireroll 0 2}}
            {{#rollBetween() hireroll 3 5}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Refuse.</b></td></tr>
            {{/rollBetween() hireroll 3 5}}
            {{#rollBetween() hireroll 6 8}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:gold;"><b>Try Again.</b></td></tr>
            {{/rollBetween() hireroll 6 8}}
            {{#rollBetween() hireroll 9 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Accept.</b></td></tr>
            {{/rollBetween() hireroll 9 11}}
            {{#rollGreater() hireroll 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:green;"><b>Accept with elan!</b></td></tr>
            {{/rollGreater() hireroll 11}}
        {{/hireroll}}
        {{#loyaltyroll}}
            <tr><td colspan="2" class="sheet-subheader">{{char}} Loyalty Roll</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            <tr><td><span class="sheet-tcat">Result: </span></td><td class="sheet-results">{{loyaltyroll}}</td></tr>
            {{#rollLess() loyaltyroll 0}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Hostility!</b></td></tr>
            {{/rollLess() loyaltyroll 0}}
            {{#rollBetween() loyaltyroll 0 2}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:red;"><b>Hostility!</b></td></tr>
            {{/rollBetween() loyaltyroll 0 2}}
            {{#rollBetween() loyaltyroll 3 5}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:firebrick;"><b>Resignation.</b></td></tr>
            {{/rollBetween() loyaltyroll 3 5}}
            {{#rollBetween() loyaltyroll 6 8}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:gold;"><b>Grudging Loyalty.</b></td></tr>
            {{/rollBetween() loyaltyroll 6 8}}
            {{#rollBetween() loyaltyroll 9 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:darkgreen;"><b>Loyalty.</b></td></tr>
            {{/rollBetween() loyaltyroll 9 11}}
            {{#rollGreater() loyaltyroll 11}}
                    <tr><td colspan="2" class="sheet-subfooter" style="color:green;"><b>Fanatic Loyalty!</b></td></tr>
            {{/rollGreater() loyaltyroll 11}}
        {{/loyaltyroll}}
        {{#type}}
            <tr><td colspan="2" class="sheet-subheader">{{type}}</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
            {{#allprops() type name description}}
                <tr><td><span class="tcat">{{key}}: </span></td><td class="sheet-spelltext">{{value}}</td></tr>
            {{/allprops() type name description}}
            {{#description}}
                <tr class="sheet-spellrow"><td colspan="2" class="sheet-spelltext"><span class="sheet-tcat">Description:</span><br/>{{description}}</td></tr>
            {{/description}}
        {{/type}}
		{{#chatmenu}}
            <tr><td colspan="2" class="sheet-subheader">Universal Chat Menu</td></tr>
            <tr><th colspan="2">{{name}}</th></tr>
			{{#allprops() chatmenu name}}
				<tr class="sheet-spellrow"><td colspan="2" class="sheet-spelltext"><span class="sheet-tcat">{{key}}:</span><br/>{{value}}</td></tr>
			{{/allprops() chatmenu name}}
		{{/chatmenu}}
    </table>
</rolltemplate>
<!-- Sheet workers -->
<script type="text/worker">
function repeatingSum (destination, section, fieldsum, fieldmult, totalcoins){
    // destination = the name of the attribute that stores the total weight
    // section = name forof repeating fieldset, without the repeating_
    // fieldsum = the name of the "weight" field to be summed
    // fieldmult = the name of quantity field, that multiplies weight. 
    //      Leave as "false" if ignored. If using a checkbox rather than a number input, set its value to 1.
    
	var repSection = "repeating_"+section;
	let multiplier = true;
	if (fieldmult === undefined || fieldmult === false || fieldmult === 'false') multiplier = false;
	getSectionIDs(repSection, function(idArray) {
		//Construct Array of fields to get attributes for...
		var sumFields = [];
		var multFields = [];
		for (var a=0; a< idArray.length; a++) {
			sumFields[sumFields.length] = repSection + "_" + idArray[a] + "_" + fieldsum;
			if(multiplier) multFields[multFields.length] = repSection + "_" + idArray[a] + "_" + fieldmult;
		}
		
		getAttrs(sumFields.concat(multFields), function(v) {
			console.log("%%% values of v: "+ JSON.stringify(v) +" %%%");
			let sumTotal = 0;
			let tempSum = 0;
			for(a=0; a<idArray.length; a++){
			    tempSum = parseFloat(v[sumFields[a]]) || 0;
			    if(multiplier) {
			        tempSum = tempSum * parseFloat(v[multFields[a]]) || 0;
			    }
				sumTotal += tempSum;
				console.log("$$$ sumTotal: " + sumTotal + " $$$");
			}
			var setSumValue = {};
			sumTotal = (sumTotal*100) + Math.round(totalcoins/10);
			setSumValue[destination]=Math.round(sumTotal)/100;
			//setSumValue[destination]=sumTotal;
			setAttrs(setSumValue);	
		});
	});
}

// Spells Cast
on('change:repeating_spells remove:repeating_spells', () => {
  "use strict";
  getSectionIDs('repeating_spells', idArray => {
    const attrs = [
      ...idArray.map(id => `repeating_spells_${id}_spelllevel`),
      ...idArray.map(id => `repeating_spells_${id}_spellcast`)
    ];
    getAttrs(attrs, v => {
      const levels = ['1', '2', '3', '4', '5', '6', '7', '8', '9'],
        spellsPrepared = levels.reduce((m, level) => {
          m[`spells_l${level}`] = 0;
          return m;
        }, {});
      idArray.forEach(id => {
        if (levels.includes(v[`repeating_spells_${id}_spelllevel`])) {
          spellsPrepared['spells_l' + v[`repeating_spells_${id}_spelllevel`]] +=
            (parseInt(v[`repeating_spells_${id}_spellcast`]) || 0);
        }
      });
      setAttrs(spellsPrepared);
    });
  });
});

// Equipment counter
on('change:repeating_equipment remove:repeating_equipment change:coinsCP change:coinsSP change:coinsEP change:coinsGP change:coinsPP', function() {
	
    var totalCoins=0;
    getAttrs(["coinsCP","coinsSP","coinsEP","coinsGP","coinsPP"], function(values) {
        for(val in values) {
            if( values.hasOwnProperty( val ) ) {
                var value = parseFloat( values[val] );
                totalCoins += value;
            }
        }
		repeatingSum("encumbranceTotal","equipment","encumbrance","itemcount", totalCoins);
    });
});

//Max Encumbrance
on('change:race change:strengthMod change:encumbranceMisc', function() {
    var racialLimit = 20;
    getAttrs(["race","strengthMod","encumbranceMisc"], function(values) {
        switch (values.race.toUpperCase()) {
            case "HALFLING":
            case "HOBBIT":
                racialLimit = 12;
                break;
            default:
        }
        setAttrs({ encumbranceMax: racialLimit+parseInt(values.strengthMod)+parseInt(values.encumbranceMisc)});
    });
});

// Movement Rate
on('sheet:opened change:race change:encumbranceTotal change:encumbranceMax change:moveMisc', function() {
    getAttrs(["is_monster","race","encumbranceTotal","encumbranceMax", "moveMisc"], function(values) {
        if (values.is_monster==0) {
			var baseRate= 120+parseInt(values.moveMisc);
			var rate1 = baseRate*0.75;
			var rate2 = baseRate*0.5;
			var rate3 = baseRate*0.25;
			switch (values.race.toUpperCase()) {
				case "HALFLING":
				case "HOBBIT":
					if(values.encumbranceTotal > values.encumbranceMax) {
						setAttrs({ moveExplore: 0, moveCombat: 0, moveWilderness: 0, moveStealth: 0, moveClimb: 0 });
					} else if(values.encumbranceTotal > 7) {
						setAttrs({ moveExplore: Math.round(rate3), moveCombat: Math.round(rate3/3), moveWilderness: Math.round(rate3/5), moveStealth: Math.round(rate3/6), moveClimb: Math.round(rate3/12) });
					} else if(values.encumbranceTotal > 5) {
						setAttrs({ moveExplore: Math.round(rate2), moveCombat: Math.round(rate2/3), moveWilderness: Math.round(rate2/5), moveStealth: Math.round(rate2/6), moveClimb: Math.round(rate2/12) });
					} else if(values.encumbranceTotal > 4) {
						setAttrs({ moveExplore: Math.round(rate1), moveCombat: Math.round(rate1/3), moveWilderness: Math.round(rate1/5), moveStealth: Math.round(rate1/6), moveClimb: Math.round(rate1/12) });
					} else {
						setAttrs({ moveExplore: Math.round(baseRate), moveCombat: Math.round(baseRate/3), moveWilderness: Math.round(baseRate/5), moveStealth: Math.round(baseRate/6), moveClimb: Math.round(baseRate/12) });
					}
					break;
				default:
					if(values.encumbranceTotal > values.encumbranceMax) {
						setAttrs({ moveExplore: 0, moveCombat: 0, moveWilderness: 0, moveStealth: 0, moveClimb: 0 });
					} else if(values.encumbranceTotal > 10) {
						setAttrs({ moveExplore: Math.round(rate3), moveCombat: Math.round(rate3/3), moveWilderness: Math.round(rate3/5), moveStealth: Math.round(rate3/6), moveClimb: Math.round(rate3/12) });
					} else if(values.encumbranceTotal > 7) {
						setAttrs({ moveExplore: Math.round(rate2), moveCombat: Math.round(rate2/3), moveWilderness: Math.round(rate2/5), moveStealth: Math.round(rate2/6), moveClimb: Math.round(rate2/12) });
					} else if(values.encumbranceTotal > 5) {
						setAttrs({ moveExplore: Math.round(rate1), moveCombat: Math.round(rate1/3), moveWilderness: Math.round(rate1/5), moveStealth: Math.round(rate1/6), moveClimb: Math.round(rate1/12) });
					} else {
						setAttrs({ moveExplore: Math.round(baseRate), moveCombat: Math.round(baseRate/3), moveWilderness: Math.round(baseRate/5), moveStealth: Math.round(baseRate/6), moveClimb: Math.round(baseRate/12) });
					}
			}
		}
    });
});

// Ability modifiers
['strength', 'dexterity', 'constitution', 'intelligence', 'wisdom', 'charisma'].forEach(ability => {
  on(`sheet:opened change:${ability.toLowerCase()}`, () => {
    getAttrs([ability.toLowerCase()], v => {
      const value = parseInt(v[ability.toLowerCase()]) || 10,
        setting = {};
      if (value <= 3) setting[`${ability}Mod`] = -3;
      else if (value <= 5) setting[`${ability}Mod`] = -2;
      else if (value <= 8) setting[`${ability}Mod`] = -1;
      else if (value <= 12) setting[`${ability}Mod`] = 0;
      else if (value <= 15) setting[`${ability}Mod`] = 1;
      else if (value <= 17) setting[`${ability}Mod`] = 2;
      else setting[`${ability}Mod`] = 3;
      setAttrs(setting);
    });
  });
});

// Derived Statistics
on('sheet:opened change:armor change:armorMisc change:initiativeMisc change:surpriseMisc change:reactionMisc change:moraleMisc change:dexterityMod change:intelligenceMod change:wisdomMod change:charismaMod change:leadershipMisc change:zocMisc change:strategyMisc', function() {
    getAttrs(["is_monster","armor","armorMisc","initiativeMisc","surpriseMisc","reactionMisc","moraleMisc","dexterityMod","intelligenceMod","wisdomMod","charismaMod","leadershipMisc","zocMisc","strategyMisc"], function(values) {
        if (values.is_monster==0) {
			var intMod=parseInt(values.intelligenceMod);
			var wisMod=parseInt(values.wisdomMod);
			var chaMod=parseInt(values.charismaMod);
			setAttrs({
				armorclass: parseInt(values.armor)+parseInt(values.armorMisc)+parseInt(values.dexterityMod),
				initiative: parseInt(values.dexterityMod)+parseInt(values.initiativeMisc),
				surprise: parseInt(values.surpriseMisc),
				reaction: chaMod+parseInt(values.reactionMisc),
				morale: chaMod+parseInt(values.moraleMisc),
				leadership: 4+chaMod+parseInt(values.leadershipMisc),
				zoc: Math.ceil((4+chaMod+parseInt(values.leadershipMisc))/2)+parseInt(values.zocMisc),
				strategy: Math.max(0,intMod,wisMod)+Math.min(0,intMod,wisMod)+parseInt(values.strategyMisc)
			});
		}
    });
});
//Update GMRoll Skills buttons sometimes I guess
on("change:repeating_gmskills:gmskillname", function() {
    getSectionIDs("repeating_gmskills", function(idArray) {
		var rollvalues = {};
        for(var i=0; i < idArray.length; i++) {
			rollvalues["repeating_gmskills_" + idArray[i] + "_gmskillRollvalue"] =  "[@{character_name} @{repeating_gmskills_" + idArray[i] + "_gmskillname}](~@{character_id}|repeating_gmskills_" + idArray[i] + "_gmGMThrow)";
        }
		setAttrs(rollvalues);
    });
});

// Monster Attack Throw
on('change:fightas change:fightlevel', function() {
    getAttrs(["fightas","fightlevel"], function(values) {
        switch (values.fightas) {
            case "MST":
                switch (parseInt(values.fightlevel)) {
                    case 0:
                    case 1:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 2:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 3:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 4:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 5:
                        setAttrs({ attackthrow: 6 });
                        break;
                    case 6:
                        setAttrs({ attackthrow: 5 });
                        break;
                    case 7:
                        setAttrs({ attackthrow: 4 });
                        break;
                    case 8:
                    case 9:
                        setAttrs({ attackthrow: 3 });
                        break;
                    case 10:
                    case 11:
                        setAttrs({ attackthrow: 2 });
                        break;
                    case 12:
                    case 13:
                        setAttrs({ attackthrow: 1 });
                        break;
                    case 14:
                    case 15:
                        setAttrs({ attackthrow: 0 });
                        break;
                    case 16:
                    case 17:
                        setAttrs({ attackthrow: -1 });
                        break;
                    case 18:
                    case 19:
                        setAttrs({ attackthrow: -2 });
                        break;
                    case 20:
                    case 21:
                        setAttrs({ attackthrow: -3 });
                        break;
                    default:
                        setAttrs({ attackthrow: -4 });
                }
                break;
            case "FTR":
                switch (parseInt(values.fightlevel)) {
                    case 0:
                        setAttrs({ attackthrow: 11 });
                        break;
                    case 1:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 2:
                    case 3:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 4:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 5:
                    case 6:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 7:
                        setAttrs({ attackthrow: 6 });
                        break;
                    case 8:
                    case 9:
                        setAttrs({ attackthrow: 5 });
                        break;
                    case 10:
                        setAttrs({ attackthrow: 4 });
                        break;
                    case 11:
                    case 12:
                        setAttrs({ attackthrow: 3 });
                        break;
                    case 13:
                        setAttrs({ attackthrow: 2 });
                        break;
                    case 14:
                        setAttrs({ attackthrow: 1 });
                        break;
                    default:
                        setAttrs({ attackthrow: 20 });
                }
                break;
            case "MAG":
                switch (parseInt(values.fightlevel)) {
                    case 0:
                        setAttrs({ attackthrow: 11 });
                        break;
                    case 1:
                    case 2:
                    case 3:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 4:
                    case 5:
                    case 6:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 7:
                    case 8:
                    case 9:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 10:
                    case 11:
                    case 12:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 13:
                    case 14:
                        setAttrs({ attackthrow: 6 });
                        break;
                    default:
                        setAttrs({ attackthrow: 20 });
                }
                break;
            case "CLR":
            case "THF":
                switch (parseInt(values.fightlevel)) {
                    case 0:
                        setAttrs({ attackthrow: 11 });
                        break;
                    case 1:
                    case 2:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 3:
                    case 4:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 5:
                    case 6:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 7:
                    case 8:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 9:
                    case 10:
                        setAttrs({ attackthrow: 6 });
                        break;
                    case 11:
                    case 12:
                        setAttrs({ attackthrow: 5 });
                        break;
                    case 13:
                    case 14:
                        setAttrs({ attackthrow: 4 });
                        break;
                    default:
                        setAttrs({ attackthrow: 20});
                }
                break;
            case "NM":
                setAttrs({ attackthrow: 11 });
                break;
            default:
                setAttrs({ attackthrow: 20});
        }
    });
});

// Monster Saving Throw
on('change:saveas change:savelevel', function() {
    getAttrs(["saveas","savelevel"], function(values) {
        switch (values.saveas) {
            case "FTR":
                switch (parseInt(values.savelevel)) {
                    case 0:
                        setAttrs({ paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 }, "silent");
                        break;
                    case 1:
                        setAttrs({ paralyzeSave: 15, poisonSave: 14, breathSave: 16, deviceSave: 16, magicSave: 17 }, "silent");
                        break;
                    case 2:
                    case 3:
                        setAttrs({ paralyzeSave: 14, poisonSave: 13, breathSave: 15, deviceSave: 15, magicSave: 16 }, "silent");
                        break;
                    case 4:
                        setAttrs({ paralyzeSave: 13, poisonSave: 12, breathSave: 14, deviceSave: 14, magicSave: 15 }, "silent");
                        break;
                    case 5:
                    case 6:
                        setAttrs({ paralyzeSave: 12, poisonSave: 11, breathSave: 13, deviceSave: 13, magicSave: 14 }, "silent");
                        break;
                    case 7:
                        setAttrs({ paralyzeSave: 11, poisonSave: 10, breathSave: 12, deviceSave: 12, magicSave: 13 }, "silent");
                        break;
                    case 8:
                    case 9:
                        setAttrs({ paralyzeSave: 10, poisonSave: 9, breathSave: 11, deviceSave: 11, magicSave: 12 }, "silent");
                        break;
                    case 10:
                        setAttrs({ paralyzeSave: 9, poisonSave: 8, breathSave: 10, deviceSave: 10, magicSave: 11 }, "silent");
                        break;
                    case 11:
                    case 12:
                        setAttrs({ paralyzeSave: 8, poisonSave: 7, breathSave: 9, deviceSave: 9, magicSave: 10 }, "silent");
                        break;
                    case 13:
                        setAttrs({ paralyzeSave: 7, poisonSave: 6, breathSave: 8, deviceSave: 8, magicSave: 9 }, "silent");
                        break;
                    case 14:
                        setAttrs({ paralyzeSave: 6, poisonSave: 5, breathSave: 7, deviceSave: 7, magicSave: 8 }, "silent");
                        break;
                    default:
                        setAttrs({ paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 }, "silent");
                }
                break;
            case "MAG":
                switch (parseInt(values.savelevel)) {
                    case 0:
                        setAttrs({ paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 }, "silent");
                        break;
                    case 1:
                    case 2:
                    case 3:
                        setAttrs({ paralyzeSave: 13, poisonSave: 13, breathSave: 15, deviceSave: 11, magicSave: 12 }, "silent");
                        break;
                    case 4:
                    case 5:
                    case 6:
                        setAttrs({ paralyzeSave: 12, poisonSave: 12, breathSave: 14, deviceSave: 10, magicSave: 11 }, "silent");
                        break;
                    case 7:
                    case 8:
                    case 9:
                        setAttrs({ paralyzeSave: 11, poisonSave: 11, breathSave: 13, deviceSave: 9, magicSave: 10 }, "silent");
                        break;
                    case 10:
                    case 11:
                    case 12:
                        setAttrs({ paralyzeSave: 10, poisonSave: 10, breathSave: 12, deviceSave: 8, magicSave: 9 }, "silent");
                        break;
                    case 13:
                    case 14:
                        setAttrs({ paralyzeSave: 9, poisonSave: 9, breathSave: 11, deviceSave: 7, magicSave: 8 }, "silent");
                        break;
                    default:
                        setAttrs({ paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 }, "silent");
                }
                break;
            case "CLR":
                switch (parseInt(values.savelevel)) {
                    case 0:
                        setAttrs({ paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 }, "silent");
                        break;
                    case 1:
                    case 2:
                        setAttrs({ paralyzeSave: 13, poisonSave: 10, breathSave: 16, deviceSave: 13, magicSave: 15 }, "silent");
                        break;
                    case 3:
                    case 4:
                        setAttrs({ paralyzeSave: 12, poisonSave: 9, breathSave: 15, deviceSave: 12, magicSave: 14 }, "silent");
                        break;
                    case 5:
                    case 6:
                        setAttrs({ paralyzeSave: 11, poisonSave: 8, breathSave: 14, deviceSave: 11, magicSave: 13 }, "silent");
                        break;
                    case 7:
                    case 8:
                        setAttrs({ paralyzeSave: 10, poisonSave: 7, breathSave: 13, deviceSave: 10, magicSave: 12 }, "silent");
                        break;
                    case 9:
                    case 10:
                        setAttrs({ paralyzeSave: 9, poisonSave: 6, breathSave: 12, deviceSave: 9, magicSave: 11 }, "silent");
                        break;
                    case 11:
                    case 12:
                        setAttrs({ paralyzeSave: 8, poisonSave: 5, breathSave: 11, deviceSave: 8, magicSave: 10 }, "silent");
                        break;
                    case 13:
                    case 14:
                        setAttrs({ paralyzeSave: 7, poisonSave: 4, breathSave: 10, deviceSave: 7, magicSave: 9 }, "silent");
                        break;
                    default:
                        setAttrs({ paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 }, "silent");
                }
                break;
            case "THF":
                switch (parseInt(values.savelevel)) {
                    case 0:
                        setAttrs({ paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 }, "silent");
                        break;
                    case 1:
                    case 2:
                        setAttrs({ paralyzeSave: 13, poisonSave: 13, breathSave: 16, deviceSave: 14, magicSave: 15 }, "silent");
                        break;
                    case 3:
                    case 4:
                        setAttrs({ paralyzeSave: 12, poisonSave: 12, breathSave: 15, deviceSave: 13, magicSave: 14 }, "silent");
                        break;
                    case 5:
                    case 6:
                        setAttrs({ paralyzeSave: 11, poisonSave: 11, breathSave: 14, deviceSave: 12, magicSave: 13 }, "silent");
                        break;
                    case 7:
                    case 8:
                        setAttrs({ paralyzeSave: 10, poisonSave: 10, breathSave: 13, deviceSave: 11, magicSave: 12 }, "silent");
                        break;
                    case 9:
                    case 10:
                        setAttrs({ paralyzeSave: 9, poisonSave: 9, breathSave: 12, deviceSave: 10, magicSave: 11 }, "silent");
                        break;
                    case 11:
                    case 12:
                        setAttrs({ paralyzeSave: 8, poisonSave: 8, breathSave: 11, deviceSave: 9, magicSave: 10 }, "silent");
                        break;
                    case 13:
                    case 14:
                        setAttrs({ paralyzeSave: 7, poisonSave: 7, breathSave: 10, deviceSave: 8, magicSave: 9 }, "silent");
                        break;
                    default:
                        setAttrs({ paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 }, "silent");
                }
                break;
            case "NM":
                switch (parseInt(values.savelevel)) {
                    default:
                        setAttrs({ paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 }, "silent");
                }
                break;
            default:
                setAttrs({ paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 }, "silent");
        }
    });
});

// Parse Monster Statblock
on('change:rawBlock', function(eventInfo) {
    var strParse = eventInfo.newValue
    strParse = strParse.split("% In Lair:")
    var monstName=strParse[0]; //character_name
    strParse = strParse[1].split("Dungeon Enc:")
    var monstLair=strParse[0]; //MBlair
    strParse = strParse[1].split("Wilderness Enc:")
    var monstDEnc=strParse[0]; //MBdungeonenc
    strParse = strParse[1].split("Alignment:")
    var monstWEnc=strParse[0]; //MBwildernessenc
    strParse = strParse[1].split("Movement:")
    var monstAlign=strParse[0]; //MBalignment
    strParse = strParse[1].split("Armor Class:")
    var monstMove=strParse[0]; //MBmovement
    strParse = strParse[1].split("Hit Dice:")
    var monstAC=strParse[0]; //MBarmorclass
    strParse = strParse[1].split("Attacks:")
    var monstHD=strParse[0]; //MBhitdice
    strParse = strParse[1].split("Damage:")
    var monstAttack=strParse[0]; //MBattack
    strParse = strParse[1].split("Save:")
    var monstDamage=strParse[0]; //MBdamage
    strParse = strParse[1].split("Morale:")
    var monstSave=strParse[0]; //MBsave
    strParse = strParse[1].split("Treasure Type:")
    var monstMorale=strParse[0]; //MBmorale
    strParse = strParse[1].split("XP:")
    var monstTreasure=strParse[0]; //MBtreasure
    var monstXP=strParse[1]; //MBxp
    setAttrs({
        character_name: monstName,
        MBlair: monstLair,
        MBdungeonenc: monstDEnc,
        MBwildernessenc: monstWEnc,
        MBalignment: monstAlign,
        MBmovement: monstMove,
        MBarmorclass: monstAC,
        MBhitdice: monstHD,
        MBattack: monstAttack,
        MBdamage: monstDamage,
        MBsave: monstSave,
        MBmorale: monstMorale,
        MBtreasure: monstTreasure,
        MBxp: monstXP
    });
});

// Calculating Character Trained/Untrained Skill Throws, Saving Throws and Attack Throw
// Classes with Split Progression: trickster (atk thief sv fighter) gladiator (atk monster sv fighter) Priest/ess Witch (atk mage sv cleric)
on('change:race change:class change:level change:paralyzeSaveMisc change:poisonSaveMisc change:breathSaveMisc change:deviceSaveMisc change:magicSaveMisc change:wisdomMod change:wisAllSaves', function() {
    var racialParalyze = 0;
    var racialPoison = 0;
    var racialBreath = 0;
    var racialDevice = 0;
    var racialMagic = 0;
	var racialAttackOffset = 0;
	var racialSaveOffset = 0;

    getAttrs(["race","class","level","paralyzeSaveMisc","poisonSaveMisc","breathSaveMisc","deviceSaveMisc","magicSaveMisc","wisdomMod", "wisAllSaves"], function(values) {
        var applyWisMod = parseInt(values.wisdomMod)*parseInt(values.wisAllSaves);
        setAttrs({
            TSskillvalue: 15-parseInt(values.level),
            USskillvalue: 19-Math.ceil(parseInt(values.level)/2)
        });

        switch (values.race.toUpperCase()) {
            case "ELF":
            case "ELVEN":
            case "ELVISH":
            case "ELFIN":
            case "ELFISH":
            case "HALFLING":
            case "HOBBIT":
                racialParalyze = 1;
                racialMagic = 1;
                break;
            case "DWARF":
			case "DWARFEN":
			case "DWARFIN":
			case "DWARVEN":
            case "DWARVIN":
                racialParalyze = 4;
                racialPoison = 4;
                racialBreath = 3;
                racialDevice = 4;
                racialMagic = 4;
                break;
			case "DRAGON":
            case "DRAGON INCARNATE":
			case "DRAGONBORN":
			case "DRAGONBLOOD":
			case "DRAGONSOUL":
				racialParalyze = 2;
                racialPoison = 2;
                racialBreath = 2;
                racialDevice = 2;
                racialMagic = 2;
                break;
			case "REVENANT":
				racialParalyze = 1;
				break;
			case "BUGBEAR":
			// This is the only case I have seen this. Functionality is built out for any value.
			// Really only works when attack and save have the same offset or follow different progressions.
				racialAttackOffset = 3;
				racialSaveOffset = 2;
				break;
			case "KOBOLD":
				racialParalyze = -1;
                racialPoison = -1;
                racialBreath = -1;
                racialDevice = -1;
                racialMagic = -1;
				break;
            default:
        }
        
        switch (values.class.toUpperCase()) {
            case "NORMAL MAN":
            case "NORMAL WOMAN":
			case "NORMAL PERSON":
            case "NORMAL":
                switch (parseInt(values.level)) {
                    default:
                        setAttrs({ attackthrow: 11, paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 });
                }
                break;
            case "FIGHTER":
            case "ASSASSIN":
            case "DWARVEN VAULTGUARD":
            case "VAULTGUARD":
            case "ELVEN SPELLSWORD":
            case "SPELLSWORD":
            case "EXPLORER":
            case "ANTI-PALADIN":
            case "BARBARIAN":
            case "DWARVEN FURY":
            case "FURY":
            case "ELVEN RANGER":
            case "RANGER":
            case "GNOMISH TRICKSTER":
            case "TRICKSTER":
            case "ZAHARAN RUINGUARD":
            case "RUINGUARD":
            case "THRASSIAN GLADIATOR":
            case "GLADIATOR":
            case "MYSTIC":
            case "PALADIN":
			case "BEASTMASTER":
			case "BERSERKER":
			case "CHOSEN":
            case "HALFLING BOUNDER":
            case "BOUNDER":
			case "NOBIRAN CHAMPION":
			case "CHAMPION":
			case "THRASSIAN DEATHCHANTER":
            case "DEATHCHANTER":
            case "WARMISTRESS":
			case "BUGMAN PRAETOR":
			case "PRAETOR":
			case "DEEP ONE HYBRID":
			case "DRAGON INCARNATE":
			case "LIZARDMAN GLADIATOR":
			case "LIZARDMAN WARRIOR":
			case "WARRIOR":
			case "MOK BRUTE":
			case "BRUTE":
			case "TERRAN COSMONAUT":
			case "COSMONAUT":
			case "ELVEN WARLORD":
            case "WARLORD":
			case "FLAGELLANT":
			case "REVENANT":
			case "NOBIRAN VEILDANCER":
			case "VEILDANCER":
			case "FOOL":
			case "ORC WARRIOR":
			case "ORCISH WARRIOR":
			case "BUGBEAR WARRIOR":
			case "KOBOLD WARRIOR":
			case "DWARVEN MULESKINNER":
			case "MULESKINNER":
			case "ORCISH ASSASSIN":
			case "ORC ASSASSIN":
			case "VARANGIAN":
			case "VALKYRIE":
                //Fighter Progression
                switch (parseInt(values.level) + racialSaveOffset) {
                    case 0:
                        setAttrs({ attackthrow: 11, paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 });
                        break;
                    case 1:
                        setAttrs({
                            attackthrow: 10,
                            paralyzeSave: 15-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 14-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 16-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 16-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 17-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 2:
                    case 3:
                        setAttrs({
                            attackthrow: 9,
                            paralyzeSave: 14-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 13-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 15-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 15-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 16-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 4:
                        setAttrs({
                            attackthrow: 8,
                            paralyzeSave: 13-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 12-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 14-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 14-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 15-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 5:
                    case 6:
                        setAttrs({
                            attackthrow: 7,
                            paralyzeSave: 12-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 11-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 13-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 13-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 14-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 7:
                        setAttrs({
                            attackthrow: 6,
                            paralyzeSave: 11-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 10-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 12-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 12-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 13-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 8:
                    case 9:
                        setAttrs({
                            attackthrow: 5,
                            paralyzeSave: 10-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 9-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 11-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 11-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 12-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 10:
                        setAttrs({
                            attackthrow: 4,
                            paralyzeSave: 9-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 8-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 10-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 10-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 11-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 11:
                    case 12:
                        setAttrs({
                            attackthrow: 3,
                            paralyzeSave: 8-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 7-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 9-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 9-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 10-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 13:
                        setAttrs({
                            attackthrow: 2,
                            paralyzeSave: 7-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 6-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 8-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 8-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 9-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 14:
                        setAttrs({
                            attackthrow: 1,
                            paralyzeSave: 6-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 5-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 7-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 7-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 8-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    default:
                        setAttrs({ attackthrow: 20, paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 });
                }
                break; 
            case "MAGE":
            case "ELVEN ENCHANTER":
            case "ENCHANTER":
            case "NOBIRAN WONDERWORKER":
            case "WONDERWORKER":
            case "WARLOCK":
			case "NOBIRAN WIZARD":
            case "WIZARD":
			case "LIZARDMAN WITCH-DOCTOR":
			case "WITCH-DOCTOR":
			case "NEPHIL":
			case "ELVEN CULTIST":
			case "ELVEN HIEROPHANT":
            case "HIEROPHANT":
			case "ELVEN WIZARD":
			case "ILLUSIONIST":
			case "GRIM SORCERER":
			case "MAGUS":
			case "OCCULTIST WARLOCK":
			case "ELVEN SAGE":
            case "SAGE":
                //Mage Progression
                switch (parseInt(values.level) + racialSaveOffset) {
                    case 0:
                        setAttrs({ attackthrow: 11, paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 });
                        break;
                    case 1:
                    case 2:
                    case 3:
                        setAttrs({
                            attackthrow: 10,
                            paralyzeSave: 13-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 13-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 15-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 11-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 12-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 4:
                    case 5:
                    case 6:
                        setAttrs({
                            attackthrow: 9,
                            paralyzeSave: 12-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 12-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 14-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 10-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 11-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 7:
                    case 8:
                    case 9:
                        setAttrs({
                            attackthrow: 8,
                            paralyzeSave: 11-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 11-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 13-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 9-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 10-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 10:
                    case 11:
                    case 12:
                        setAttrs({
                            attackthrow: 7,
                            paralyzeSave: 10-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 10-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 12-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 8-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 9-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 13:
                    case 14:
                        setAttrs({
                            attackthrow: 6,
                            paralyzeSave: 9-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 9-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 11-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 7-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 8-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    default:
                        setAttrs({ attackthrow: 20, paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 });
                }
                break;
            case "CLERIC":
            case "BLADEDANCER":
            case "DWARVEN CRAFTPRIEST":
            case "CRAFTPRIEST":
            case "PRIEST":
            case "PRIESTESS":
            case "SHAMAN":
            case "WITCH":
			case "ECCLESIASTIC":
			case "ELVEN SPELLSLINGER":
			case "SPELLSINGER":
			case "LOREMASTER":
			case "OCCULTIST":
			case "RUNEMAKER":
			case "ZAHARAN DARKLORD":
			case "DARKLORD":
			case "ZAHARAN SORCERER":
			case "SORCERER":
			case "BLESSED UNDERTAKER":
			case "GECKOMAN SPIRIT-TALKER":
			case "SPIRIT-TALKER":
			case "LIZARDMAN PRIESTESS":
			case "NECROMANCER":
			case "TEMPLAR":
			case "PRIESTESS OF NASGA":
			case "ASSASSIN-PRIEST":
                //Cleric Progression
                switch (parseInt(values.level) + racialSaveOffset) {
                    case 0:
                        setAttrs({ attackthrow: 11, paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 });
                        break;
                    case 1:
                    case 2:
                        setAttrs({
                            attackthrow: 10,
                            paralyzeSave: 13-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 10-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 16-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 13-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 15-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 3:
                    case 4:
                        setAttrs({
                            attackthrow: 9,
                            paralyzeSave: 12-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 9-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 15-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 12-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 14-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 5:
                    case 6:
                        setAttrs({
                            attackthrow: 8,
                            paralyzeSave: 11-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 8-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 14-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 11-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 13-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 7:
                    case 8:
                        setAttrs({
                            attackthrow: 7,
                            paralyzeSave: 10-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 7-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 13-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 10-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 12-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;

                    case 9:
                    case 10:
                        setAttrs({
                            attackthrow: 6,
                            paralyzeSave: 9-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 6-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 12-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 9-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 11-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 11:
                    case 12:
                        setAttrs({
                            attackthrow: 5,
                            paralyzeSave: 8-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 5-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 11-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 8-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 10-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 13:
                    case 14:
                        setAttrs({
                            attackthrow: 4,
                            paralyzeSave: 7-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 4-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 10-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 7-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 9-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    default:
                        setAttrs({ attackthrow: 20, paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 });
                }
                break;
            case "THIEF":
            case "BARD":
            case "ELVEN NIGHTBLADE":
            case "NIGHTBLADE":
            case "DWARVEN DELVER":
            case "DELVER":
            case "DWARVEN MACHINIST":
            case "MACHINIST":
            case "ELVEN COURTIER":
            case "COURTIER":
            case "VENTURER":
            case "FREEBOOTER":
            case "EXPEDITIONARY":
            case "RUFFIAN":
            case "SCOUNDREL":
            case "WAYFARER":
            case "HALFLING BURGLAR":
            case "BURGLAR":
			case "BUGMAN DREDGER":
			case "DREDGER":
			case "BUGMAN OVATE":
			case "OVATE":
			case "KANAHU CULTIST":
			case "CULTIST":
			case "GECKOMAN STALKER":
			case "STALKER":
			case "LIZARDMAN HUNTER":
			case "HUNTER":
			case "TERRAN STARMAN":
			case "STARMAN":
			case "PUGILIST":
			case "MOUNTEBANK":
                //Thief Progression
                switch (parseInt(values.level) + racialSaveOffset) {
                    case 0:
                        setAttrs({ attackthrow: 11, paralyzeSave: 16, poisonSave: 15, breathSave: 17, deviceSave: 17, magicSave: 18 });
                        break;
                    case 1:
                    case 2:
                        setAttrs({
                            attackthrow: 10,
                            paralyzeSave: 13-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 13-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 16-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 14-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 15-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 3:
                    case 4:
                        setAttrs({
                            attackthrow: 9,
                            paralyzeSave: 12-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 12-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 15-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 13-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 14-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 5:
                    case 6:
                        setAttrs({
                            attackthrow: 8,
                            paralyzeSave: 11-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 11-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 14-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 12-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 13-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 7:
                    case 8:
                        setAttrs({
                            attackthrow: 7,
                            paralyzeSave: 10-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 10-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 13-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 11-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 12-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;

                    case 9:
                    case 10:
                        setAttrs({
                            attackthrow: 6,
                            paralyzeSave: 9-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 9-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 12-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 10-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 11-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 11:
                    case 12:
                        setAttrs({
                            attackthrow: 5,
                            paralyzeSave: 8-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 8-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 11-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 9-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 10-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    case 13:
                    case 14:
                        setAttrs({
                            attackthrow: 4,
                            paralyzeSave: 7-parseInt(values.paralyzeSaveMisc)-applyWisMod-racialParalyze,
                            poisonSave: 7-parseInt(values.poisonSaveMisc)-applyWisMod-racialPoison,
                            breathSave: 10-parseInt(values.breathSaveMisc)-applyWisMod-racialBreath,
                            deviceSave: 8-parseInt(values.deviceSaveMisc)-applyWisMod-racialDevice,
                            magicSave: 9-parseInt(values.magicSaveMisc)-parseInt(values.wisdomMod)-racialMagic
                        });
                        break;
                    default:
                        setAttrs({ attackthrow: 20, paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 });
                }
                break;
            default: 
                //NO PROGRESSION
                setAttrs({ attackthrow: 20, paralyzeSave: 20, poisonSave: 20, breathSave: 20, deviceSave: 20, magicSave: 20 });
        }
        //Change Attack Progression, (attack progression is different from save progression)
        switch (values.class.toUpperCase()) {
            case "THRASSIAN GLADIATOR":
            case "GLADIATOR":
			case "BUGMAN PRAETOR":
			case "PRAETOR":
			case "LIZARDMAN GLADIATOR":
			case "MOK BRUTE":
			case "BRUTE":
			case "ORC WARRIOR":
			case "ORCISH WARRIOR":
			case "BUGBEAR WARRIOR":
			case "ORCISH ASSASSIN":
                //Monster Progression
                switch (parseInt(values.level) + racialAttackOffset) {
                    case 0:
                    case 1:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 2:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 3:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 4:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 5:
                        setAttrs({ attackthrow: 6 });
                        break;
                    case 6:
                        setAttrs({ attackthrow: 5 });
                        break;
                    case 7:
                        setAttrs({ attackthrow: 4 });
                        break;
                    case 8:
                    case 9:
                        setAttrs({ attackthrow: 3 });
                        break;
                    case 10:
                    case 11:
                        setAttrs({ attackthrow: 2 });
                        break;
                    case 12:
                    case 13:
                        setAttrs({ attackthrow: 1 });
                        break;
                    case 14:
                        setAttrs({ attackthrow: 0 });
                        break;
                    default:
                        //DONT DO A DAMN THING
                }
                break;
			case "KOBOLD WARRIOR":
				// Fucking weird kobold progression different from anyone else.
				switch (parseInt(values.level) + racialAttackOffset) {
                    case 0:
						setAttrs({ attackthrow: 11 });
                        break;
                    case 1:
					case 2:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 3:
                    case 4:
						setAttrs({ attackthrow: 9 });
                        break;
                    case 5:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 6:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 7:
                        setAttrs({ attackthrow: 6 });
                        break;
                    case 8:
						setAttrs({ attackthrow: 5 });
                        break;
                    case 9:
                        setAttrs({ attackthrow: 4 });
                        break;
                    case 10:
                    case 11:
                        setAttrs({ attackthrow: 3 });
                        break;
                    case 12:
                        setAttrs({ attackthrow: 2 });
                        break;
                    default:
                        //DONT DO A DAMN THING
                }
				break;
            case "FREEBOOTER":
            case "EXPEDITIONARY":
            case "RUFFIAN":
            case "SCOUNDREL":
            case "WAYFARER":
                //Fighter Progression
                switch (parseInt(values.level) + racialAttackOffset) {
                    case 0:
                        setAttrs({ attackthrow: 11 });
                        break;
                    case 1:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 2:
                    case 3:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 4:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 5:
                    case 6:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 7:
                        setAttrs({ attackthrow: 6 });
                        break;
                    case 8:
                    case 9:
                        setAttrs({ attackthrow: 5 });
                        break;
                    case 10:
                        setAttrs({ attackthrow: 4 });
                        break;
                    case 11:
                    case 12:
                        setAttrs({ attackthrow: 3 });
                        break;
                    case 13:
                        setAttrs({ attackthrow: 2 });
                        break;
                    case 14:
                        setAttrs({ attackthrow: 1 });
                        break;
                    default:
                        //DONT DO A DAMN THING
                }
                break;
            case "PRIEST":
            case "PRIESTESS":
            case "SHAMAN":
            case "WITCH":
			case "ECCLESIASTIC":
			case "ELVEN SPELLSLINGER":
			case "SPELLSINGER":
			case "LOREMASTER":
			case "OCCULTIST":
			case "ZAHARAN SORCERER":
			case "SORCERER":
			case "PRIESTESS OF NASGA":
                //Mage Progression
                switch (parseInt(values.level) + racialAttackOffset) {
                    case 0:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 1:
                    case 2:
                    case 3:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 4:
                    case 5:
                    case 6:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 7:
                    case 8:
                    case 9:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 10:
                    case 11:
                    case 12:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 13:
                    case 14:
                        setAttrs({ attackthrow: 6 });
                        break;
                    default:
                    //DONT DO A DAMN THING
                }
                break;
            case "GNOMISH TRICKSTER":
            case "TRICKSTER":
			case "LIZARDMAN WITCH-DOCTOR":
			case "WITCH-DOCTOR":
			case "NEPHIL":
                //Thief and Cleric Progression
                switch (parseInt(values.level) + racialAttackOffset) {
                    case 0:
                        setAttrs({ attackthrow: 11 });
                        break;
                    case 1:
                    case 2:
                        setAttrs({ attackthrow: 10 });
                        break;
                    case 3:
                    case 4:
                        setAttrs({ attackthrow: 9 });
                        break;
                    case 5:
                    case 6:
                        setAttrs({ attackthrow: 8 });
                        break;
                    case 7:
                    case 8:
                        setAttrs({ attackthrow: 7 });
                        break;
                    case 9:
                    case 10:
                        setAttrs({ attackthrow: 6 });
                        break;
                    case 11:
                    case 12:
                        setAttrs({ attackthrow: 5 });
                        break;
                    case 13:
                    case 14:
                        setAttrs({ attackthrow: 4 });
                        break;
                    default:
                    //DONT DO A DAMN THING
                }
                break;
            default: 
                //DONT DO A DAMN THING
        }
    });
});
</script>
